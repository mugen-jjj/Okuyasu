
; Var(0)  = 
; Var(1)  = 
; Var(2)  = コマンド強弱
; Var(3)  = 
; Var(4)  = キャンセルフラグ（スタンドも）
; Var(5)  = 3c�q�b�g�t���O
; Var(6)  = x
; Var(7)  = y
; Var(8)  = アサルトフラグ
; Var(9)  = スタンド出現フラグ（いる？）
;
; Var(10) = 
; Var(11) = 
; Var(12) = 
; Var(13) = ヒット
; Var(14) = 投げ補正
; Var(15) = 
; Var(16) = 
; Var(17) = 死亡フラグ
; Var(18) = 
; Var(19) = movehit監視
;
; Var(20) = 汎用var
; Var(21) = 
; Var(22) = 
; Var(23) = 
; Var(24) = 
; Var(25) = 
; Var(26) = 
; Var(27) = 
; Var(28) = 
; Var(29) = 
;
; Var(30) = 
; Var(31) = 
; Var(32) = 
; Var(33) = 
; Var(34) = 
; Var(35) = 
; Var(36) = 
; Var(37) = 
; Var(38) = 
; Var(39) = 
;
; var(40) = 
; Var(41) = 
; Var(42) = 
; Var(43) = 
; Var(44) = 
; Var(45) = 
; Var(46) = 
; Var(47) = 
; Var(48) = タッグ生死
; Var(49) = 
;
; Var(50) = 
; Var(51) = 
; Var(52) = 
; Var(53) = 
; Var(54) = 
; Var(55) = 
; Var(56) = 
; Var(57) = intro
; Var(58) = 
; Var(59) = 
;
;FVar(0)  = 
;FVar(1)  = 
;FVar(2)  = 
;FVar(3)  = 
;FVar(4)  = 
;FVar(5)  = 
;FVar(6)  = 
;FVar(7)  = 
;FVar(8)  = 
;FVar(9)  = 
;
;FVar(10) = コンボ補正
;FVar(11) = 
;FVar(12) = 
;FVar(13) = 
;FVar(14) = 
;FVar(15) = 
;FVar(16) = 
;FVar(17) = 
;FVar(18) = 
;FVar(19) = 
;
;FVar(20) = 浮き補正
;FVar(21) = intro
;FVar(22) = 
;FVar(23) = 
;FVar(24) = 
;FVar(25) = 
;FVar(26) = 
;FVar(27) = 
;FVar(28) = 
;FVar(29) = 
;
;FVar(30) = 
;FVar(31) = 
;FVar(32) = 
;FVar(33) = 
;FVar(34) = 
;FVar(35) = 
;FVar(36) = 
;FVar(37) = 
;FVar(38) = 
;FVar(39) = 

;---------------------------------------------------------------------------
; Data
;---------------------------------------------------------------------------
[Data]
life              = 1000
power             = 5000
attack            = 100
defence           = 100
fall.defence_up   = 50
liedown.time      = 30
airjuggle         = 15
sparkno           = 2
guard.sparkno     = 40
KO.echo           = 0
volume            = 255
IntPersistIndex   = 57
FloatPersistIndex = 40

;---------------------------------------------------------------------------
; Size
;---------------------------------------------------------------------------
[Size]
xscale           = 1
yscale           = 1
ground.back      = 22
ground.front     = 22
air.back         = 12
air.front        = 12
height           = 65
attack.dist      = 160
proj.attack.dist = 90
proj.doscale     = 0
head.pos         = -5,-100
mid.pos          = -5,-65
shadowoffset     = 2
draw.offset      = 0,0

;---------------------------------------------------------------------------
; Velocity
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 1.6
walk.back    = -1.4
run.fwd      = 5.2,0
run.back     = -3.5,-3.8
jump.neu     = 0,-9.5
jump.back    = -2.1
jump.fwd     = 2.1
runjump.back = -3,-8.5
runjump.fwd  = 3,-8.5
airjump.neu  = 0,-8.1
airjump.back = -2.55
airjump.fwd  = 2.5

;---------------------------------------------------------------------------
; Movement
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0
airjump.height  = 35
yaccel          = .5
stand.friction  = .85
crouch.friction = .82

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NA,SA,HA,NP,SP,HP

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = IfElse(var(8), 701, 47)

[State 52, 2]
type = playsnd
trigger1 = Time = 0
value = 52,0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = !var(8)
trigger1 = Time = 3
value = 1

[State 52, ]
type = assertspecial
trigger1 = var(8)
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------

; Jump Land
[Statedef 2252]
type    = S
physics = S
ctrl = 0
anim = 48

[State 52, 2]
type = playsnd
trigger1 = Time = 0
value = 52,0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, as]
type = assertspecial
trigger1 = !ctrl && ((prevstateno = [600,699]) || (prevstateno = [901,906]))
trigger1 = AnimTime < 0
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

;---------------------------------------------------------------------------
;dash
[Statedef 100]
type    = S
physics = N
ctrl = 0
anim = 100
sprpriority = 0

[State 0, snd]
type = playsnd
trigger1 = time = 1
trigger1 = random%2 = 0
value = 100,random%2
channel = 0

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoAutoTurn

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(3) = 0
x = const(velocity.run.fwd.x)

[State 100, 1]
type = VelSet
trigger1 = AnimElemTime(5) = 0
x = 0

[State 100, 4]
type = ChangeAnim
trigger1 = AnimElemTime(4) > 5 && AnimElemTime(5) < 0
trigger1 = command != "holdfwd"
value = 100
elem = 5

[State 100, 1]
type = VelMul
trigger1 = AnimElemTime(5) >= 0
x = .85

[State 100, 1]
type = ctrlset
trigger1 = AnimElemTime(4) > 5
value = 1

[State 100, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;Back Run
[Statedef 105]
type    = S
movetype = I
physics = N
anim = 105
velset = 0,0
ctrl = 0
sprpriority = 0

[State 100,00]
type = Afterimage
trigger1 = !time
trans = add
TimeGap = 1
FrameGap = 3
time = 20
palcolor = 0
PalBright = 20,20,80
PalContrast = 80,80,255
length = 10
palinvertall = 1
ignorehitpause=1

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = time = 3
x = const(velocity.run.back.x)

[State 0, snd]
type = playsnd
trigger1 = time = 3
value = 105,random%2
channel = 0

[State 0, snd]
type = playsnd
trigger1 = time = 3
value = 105,(random%2)
channel = 0
[State 0, snd]
type = playsnd
trigger1 = time = 3
value = 3,7

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
flag2 = NoAutoTurn

[State 0, end]
type = nothitby
trigger1 = time < 10
value = SCA

[State 0, vel]
type = velset
trigger1 = time = 21
x = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = !AILevel>0

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
trigger1 = !AILevel
trigger1 = command != "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = P2statetype = A
trigger2 = P2bodydist x <= 100
trigger2 = random < AILevel*30 + (helper(50000),var(13)*1)*20
trigger3 = numhelper(50000)
trigger3 = AILevel && time = 0 && helper(50000),var(13) >= 3
trigger4 = numhelper(50000)
trigger4 = AILevel
trigger4 = helper(50000),var(5) = p2stateno && helper(50000),var(5)
statetype = S
physics = S

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
trigger1 = !AILevel
trigger1 = command = "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = P2statetype != A
trigger2 = !(helper(50000),var(5) = p2stateno && helper(50000),var(5))
trigger2 = random < AILevel*40 + (helper(50000),var(13)*-1)*20
trigger3 = !(helper(50000),var(5) = p2stateno && helper(50000),var(5))
trigger3 = numhelper(50000)
trigger3 = AILevel && time = 0 && helper(50000),var(13) <= 0
statetype = C
physics = C

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = !AILevel
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Stand guard (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = !AILevel
trigger1 = command = "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = P2statetype != A
trigger2 = !(helper(50000),var(5) = p2stateno && helper(50000),var(5))
trigger2 = random < AILevel*30 + (helper(50000),var(13)*-1)*20
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = !AILevel
trigger1 = command != "holdback"
Trigger2 = AILevel > 0
Trigger2 = numhelper(50000) > 0
Trigger2 = !inguarddist && ((helper(50000),inguarddist != 1) && (p2bodydist x < 100||(p2movetype!=A)))&& (enemynear(var(44)),numproj = 0)
Trigger2 = Random <= (floor(AILevel/1000%100))*(floor(AILevel/1000%100))*10
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Crouch guard (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = !AILevel
trigger1 = command != "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = P2statetype = A
trigger2 = P2bodydist x <= 100
trigger2 = random < AILevel*30 + (helper(50000),var(13)*1)*20
trigger3 = numhelper(50000)
trigger3 = AILevel
trigger3 = (helper(50000),var(5) = p2stateno && helper(50000),var(5))
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = !AILevel
trigger1 = command != "holdback"
Trigger2 = AILevel > 0
Trigger2 = numhelper(50000) > 0
Trigger2 = !inguarddist && ((helper(50000),inguarddist != 1) && (p2bodydist x < 100||(p2movetype!=A)))&& (enemynear(var(44)),numproj = 0)
Trigger2 = Random <= (floor(AILevel/1000%100))*(floor(AILevel/1000%100))*10
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Air guard (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = !AILevel
trigger1 = command = "holdback"
trigger2 = AILevel
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = !AILevel
trigger1 = command != "holdback"
Trigger2 = AILevel > 0
Trigger2 = numhelper(50000) > 0
Trigger2 = !inguarddist && ((helper(50000),inguarddist != 1) && (p2bodydist x < 100||(p2movetype!=A)))&& (enemynear(var(44)),numproj = 0)
Trigger2 = Random <= (floor(AILevel/1000%100))*(floor(AILevel/1000%100))*10
trigger3 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Guard (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = Statetype = S && command = "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = Statetype = S && P2statetype != A
trigger2 = random < AILevel*30 + (helper(50000),var(13)*-1)*20
trigger2 = !(helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = statetype = C && command != "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = statetype = C && P2statetype = A
trigger2 = P2bodydist x <= 100
trigger2 = random < AILevel*30 + (helper(50000),var(13)*1)*20
trigger3 = numhelper(50000)
trigger3 = AILevel
trigger3 = statetype = C
trigger3 = (helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = S
physics = S

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
triggerall = inguarddist
trigger1 = !AILevel
trigger1 = command = "holdback"
trigger2 = AILevel
value = 130

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; Stand guard hit (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = Statetype = S && command = "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = Statetype = S && P2statetype != A
trigger2 = random < AILevel*30 + (helper(50000),var(13)*-1)*20
trigger2 = !(helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = statetype = C && command != "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = statetype = C && P2statetype = A
trigger2 = P2bodydist x <= 100
trigger2 = random < AILevel*30 + (helper(50000),var(13)*1)*20
trigger3 = numhelper(50000)
trigger3 = AILevel
trigger3 = statetype = C
trigger3 = (helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; Stand guard hit (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = Statetype = S && command = "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = Statetype = S && P2statetype != A
trigger2 = random < AILevel*30 + (helper(50000),var(13)*-1)*20
trigger2 = !(helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = statetype = C && command != "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = statetype = C && P2statetype = A
trigger2 = P2bodydist x <= 100
trigger2 = random < AILevel*30 + (helper(50000),var(13)*1)*20
trigger3 = numhelper(50000)
trigger3 = AILevel
trigger3 = statetype = C
trigger3 = (helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; Crouch guard hit (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = Statetype = S && command = "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = Statetype = S && P2statetype != A
trigger2 = random < AILevel*30 + (helper(50000),var(13)*-1)*20
trigger2 = !(helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = statetype = C && command != "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = statetype = C && P2statetype = A
trigger2 = P2bodydist x <= 100
trigger2 = random < AILevel*30 + (helper(50000),var(13)*1)*20
trigger3 = numhelper(50000)
trigger3 = AILevel
trigger3 = statetype = C
trigger3 = (helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; Crouch guard hit (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = Statetype = S && command = "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = Statetype = S && P2statetype != A
trigger2 = random < AILevel*30 + (helper(50000),var(13)*-1)*20
trigger2 = !(helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = !AILevel
trigger1 = statetype = C && command != "holddown"
trigger2 = numhelper(50000)
trigger2 = AILevel
trigger2 = statetype = C && P2statetype = A
trigger2 = P2bodydist x <= 100
trigger2 = random < AILevel*30 + (helper(50000),var(13)*1)*20
trigger3 = numhelper(50000)
trigger3 = AILevel
trigger3 = statetype = C
trigger3 = (helper(50000),var(5) = p2stateno && helper(50000),var(5))
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; Air guard hit (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; Air guard hit (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = !AILevel
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 6]
type = ChangeState
triggerall = AILevel
trigger1 = sysvar(0)
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
;本体時ガード（スタンド）
[Statedef 125]
type = U
physics = U
sprpriority = 2
anim = 9999

[State 1000, 0]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 10000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 100, 2]
type = turn
trigger1 = facing != root,facing

[State 120, 1]
type = ChangeAnim
triggerall = anim != 125
trigger1 = root,anim = 120
trigger2 = root,anim = 130
trigger3 = root,anim = 132
value = 125

[State 120, 1]
type = ChangeAnim
triggerall = anim != 126
trigger1 = root,anim = 121
trigger2 = root,anim = 131
value = 126

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 150
value = 155
persistent = 0

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 151
value = 156
persistent = 0

[State 120, 1]
type = ChangeAnim
trigger1 = root,anim = 152
value = 157
persistent = 0

[State 2600, ChangeState]
type = changeanim
trigger1 = root,stateno = [150,155];154
trigger1 = root,command = "holdback"
trigger1 = animelem = 4
value = anim
elem = 2
persistent = 1

[State 2600, ChangeState]
type = changeanim
triggerall = IsHelper
trigger1 = (parent,var(6)&128)
value = anim
elem = AnimElemNo(0)-!AnimElemTime(AnimElemNo(0))
persistent = 1

[State 2600, posfreeze]
type = posfreeze
triggerall = IsHelper
trigger1 = (parent,var(6)&128)

[State 120, 5]
type = ChangeState
triggerall = time > 1
triggerall = root,time = 1
trigger1 = root,stateno = 150
trigger2 = root,stateno = 152
trigger3 = root,stateno = 154
value = 125

[State 120, 5]
type = DestroySelf
trigger1 = root,stateno != 120
trigger1 = root,stateno != [130,132]
trigger1 = root,stateno != 140
trigger1 = root,stateno != [150,155]
trigger2 = anim = 145 || anim = 146 || anim = 155 || anim = 156 || anim = 157
trigger2 = animtime = 0

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 200
triggerall = Alive = 1
triggerall = Time = 1
trigger1 = prevStateNo != 150 || prevStateNo != 151 || prevStateNo != 152
value = 150,0+(random%2)
channel = 10

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 200
triggerall = Alive = 1
triggerall = Time = 1
trigger1 = prevStateNo != 150 || prevStateNo != 151 || prevStateNo != 152
value = 150,0+(random%2)
channel = 10
persistent = 0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 200
triggerall = Alive = 1
triggerall = Time = 1
trigger1 = prevStateNo != 150 || prevStateNo != 151 || prevStateNo != 152
value = 150,0+(random%2)
channel = 10
persistent = 0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
;tatakitukerare
;---------------------------------------------------------------------------
[Statedef 5113]
type = A
movetype = H
physics = N
VelSet = 0,0
ctrl = 0

[State 50, 2]
type = ChangeAnim
trigger1 = !HitShakeOver
value = anim

[State 50, 2]
type = ChangeAnim
trigger1 = HitShakeOver
value = 5050

[State 5030, 3]
type = HitVelSet
trigger1 = hitshakeover
x = 1
y = 1
persistent = 0

[State 50, 2]
type = Gravity
trigger1 = HitShakeOver

[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5114

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5114]
type    = A
movetype= H
physics = N
anim = 5100
facep2 = 1

[State 5120, 3]
type = NotHitBy
trigger1 = time = 0
value = SCA
value2 = SCA
time = 0

[State 5100, 1]
type = VelSet
trigger1 = 1
x = 0

[State 2601, EnvShake]
type = EnvShake
trigger1 = !time
time = 10
ampl = 2

[State 5100, EnvShake]
type = null;FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
trigger1 = 1
value = 5100

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = null;ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5117 ;HIT_LIEDOWN

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = null;PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = time > 3;AnimTime = 0
value = 5115

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5115]
type    = A
movetype= H
physics = N

[State 5100, 5]
type = VelSet
trigger1 = gethitvar(fall.yvel) = 0
trigger1 = Time = 0
x = -1.2
y = -4.5

[State 5100, 5]
type = VelSet
trigger1 = gethitvar(fall.yvel) < 0
trigger1 = Time = 0
x = -1.2
y = gethitvar(fall.yvel)

[State 1000, p]
type = posadd
trigger1 = gethitvar(fall.yvel) = -10.1
trigger1 = time = 1
y = -10
[State 1000, p]
type = changeanim2
trigger1 = gethitvar(fall.yvel) = -10.1
value = 1690

[State 1000, p]
type = angledraw
trigger1 = gethitvar(fall.yvel) = -10.1
value = 0+(time*30)

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = null;HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = null;PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .45

[State 5040, 5] ;Recover near ground
type = SelfState
triggerall = gethitvar(fall.yvel) != -10.1
triggerall = gethitvar(fall.yvel) < 0
triggerall = time >= 15
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = canrecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5040, 6]; Recover in mid air
type = SelfState
triggerall = gethitvar(fall.yvel) != -10.1
triggerall = gethitvar(fall.yvel) < 0
triggerall = time >= 15
triggerall = Vel Y > 0
triggerall = alive
trigger1 = canrecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5101, 6] ;Hit ground
type = selfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
value = 5110

;---------------------------------------------------------------------------
; Air get-hit (fall recovery on ground; still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= Const(movement.air.gethit.groundrecover.groundlevel)
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5200]
type = S
movetype = I
physics = N
anim = 5200

[State -2, Voice]
type = PlaySnd
trigger1 = !time
value = 5210 + var(50), 0 + (random%2)
channel = 0

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = p2dist x < -5

[State 0, vel]
type = velset
trigger1 = !time
x = -4
y = 0

[State 0, vel]
type = velmul
trigger1 = 1
x = .8

[State 0, vel]
type = posset
trigger1 = !time
y = 0

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA
time = 3

[State 0, color]
type = palfx
trigger1 = time <= 8
trigger1 = time%2=1
add = 128,128,192
time = 1
persistent = 1
IgnoreHitPause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Air get-hit (fall recovery on ground)
[Statedef 5201]
type = S
movetype = I
physics = N
anim = 5200

[State -2, Voice]
type = PlaySnd
trigger1 = !time
value = 5210, 0 + (random%2)
channel = 0

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < Const720p(-20)

[State 0, vel]
type = velset
trigger1 = !time
x = -4
y = 0

[State 0, vel]
type = velmul
trigger1 = 1
x = .95

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 3

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = Explod
trigger1 = Time = 0
anim = F60
postype = none
pos = pos x + camerapos x, (pos y) - floor(vel y)
facing = facing
sprpriority = -10

[State 5201, 5] ;Blink white
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_AIRFALLRECOVER
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0
velset = 0,0

[State -2, Voice]
type = PlaySnd
trigger1 = !time
value = 5210,0+(random%2)
channel = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5210, 1]
type = PosFreeze
trigger1 = Time = 0
value = 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -20

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 1]
type = Velset
trigger1 = Time = 4
y = -6

[State 5210, 2] ;Go fwd
type = VelSet
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = 3

[State 5210, 2] ;Go back
type = VelSet
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = -3

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 4
value = 1

[State 5210, 5]
type = VelAdd
trigger1 = 1
y = .45

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMP_LAND
ctrl = 1

;===========================================================================
;Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 0, var] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 0, var] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 0, end] ;Intro for round 1
type = changestate
trigger1 = roundno = 1
trigger2 = roundsexisted = 0
trigger2 = teammode = Turns
trigger2 = roundno > 0
value = 190

;---------------------------------------------------------------------------
;time over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 903, vo]
type = playsnd
trigger1 = time = 8
value = 3005,1
channel = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
[Statedef 180]
type = S

[State 180, win]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
;勝利1
[Statedef 181]
type = S
ctrl = 0
anim = IfElse(matchover&&(var(57)=10||var(57)=20||var(57)=50), 1000, 181)
velset = 0,0

[State -2, Voice]
type = PlaySnd
trigger1 = !matchover
trigger1 = !time
value = 180,random%2
channel = 0

[State -2, Voice]
type = PlaySnd
trigger1 = matchover
trigger1 = !time
value = 181,random%3
channel = 0

[State 903, Voice]
type = playsnd
triggerall = matchover
trigger1 = var(57) = [10, 80]
trigger1 = time = 0
value = 190, 1000 + var(57)
channel = 0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0,240+(matchover)*240]
flag = RoundNotOver

[State 181, nhb]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
anim = 0

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "Jotaro" || p4name = "Jotaro"
trigger2 = p2name = "Jotaro Kujo" || p4name = "Jotaro Kujo"
var(57) = 10

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "Josuke" || p4name = "Josuke"
trigger2 = p2name = "Josuke higashikata" || p4name = "Josuke higashikata"
trigger3 = p2name = "ASB_JOSUKE" || p4name = "ASB_JOSUKE"
var(57) = 20

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "rohan" || p4name = "rohan"
var(57) = 30

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "Otoishi" || p4name = "Otoishi"
var(57) = 40

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "hirose koiti" || p4name = "hirose koiti"
var(57) = 50

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "vanillaice" || p4name = "vanillaice"
var(57) = 60

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "killa yoshikage" || p4name = "killa yoshikage"
trigger2 = p2name = "KawajiriKosaku" || p2name = "KawajiriKosaku"
trigger3 = p2name = "yoshikage" || p4name = "yoshikage"
var(57) = 70

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "Joseph" || p4name = "Joseph"
var(57) = 80

[State , spe]
type = varset
triggerall = !time
trigger1 = p2name = "yutosine" || p4name = "yutosine"
var(57) = 90

[State , spe]
type = varset
trigger1 = !time
;triggerall = teammode = simul
trigger1 = partner,name = "hirose koiti"
var(57) = 100


[State , spe]
type = varset
triggerall = !time
;triggerall = teammode = simul
trigger1 = partner,name = "Josuke"
trigger2 = partner,name = "Josuke higashikata"
trigger3 = partner,name = "ASB_JOSUKE"
var(57) = 110


[State 191, intro]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, end]
type = changestate
trigger1 = var(57) = 40
value = 194

[State 0, end]
type = changestate
trigger1 = (teamside = 1 && !(var(57) = 20 || var(57) = 50)) || p2stateno = 0 || time > 300
trigger2 = var(57)=30
trigger3 = var(57)=100
value = 191

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 191]
type = S
ctrl = 0
anim = IfElse(var(57)=20||var(57)=30||var(57)=50||var(57)=80||var(57)=100, 1000, 190)

[State 903, taro]
type = playsnd
trigger1 = var(57) = [10, 110]
trigger1 = time = 10
value = 190, var(57)
channel = 0

[State 903, rohan]
type = playsnd
trigger1 = !var(57)
trigger1 = time = 10
value = 190,random%3
channel = 0

[State 191, intro]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 0, end]
type = changestate
trigger1 = animtime = 0 || time > 500
trigger2 = var(57)=80 && time > 260
trigger3 = var(57)=100 && time > 210
value = 0

;---------------------------------------------------------------------------
; otoisi
[Statedef 194]
type = S
ctrl = 0
anim = 194

[State 191, intro]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 300001, helper]
type = helper
trigger1 = time = 150
helpertype = normal
name = "stand"
postype = p1
pos = 0,0
stateno = 10194

[state 300001, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "gomi_1"
postype = p1
pos = 180,0
facing = -1
stateno = 101940

[state 300001, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "gomi_2"
postype = p1
pos = 200,0
facing = -1
stateno = 101941

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 240
value = 190, 40
channel = 0

[State 0, end]
type = changestate
trigger1 = animtime = 0
value = 0

;-------------------
;GHA Stand Hit
[Statedef 10194]
type    = S
physics = S
ctrl = 0
anim = 10194
sprpriority = 2

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 146
length = 25
palcolor = 256
palbright = 240,240,240
palcontrast = 120,120,220
palpostbright = 0,0,0
paladd = 10,10,25
palmul = .65,.65,.75
trans = "add"
ignorehitpause = 0
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 850
ID = 850
pos = 32,-89
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 850
ID = 850
pos = 32,-89
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 8
anim = 850
ID = 850
pos = 32, -84
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 13
anim = 850
ID = 850
pos = 32,-73
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 18
anim = 850
ID = 850
pos = 32,-83
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0
channel = 8

;がオンがオン
[State 0, Explod]
type = Explod
trigger1 = animelem = 8
trigger2 = animelem = 18
anim = 3519
ID = 3519
pos = 35, -80 + random%10
postype = p1  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = 12
scale = 1.6, .5 + (random%4) * 0.1
angle = -180
sprpriority = 2
removeongethit = 1
[State 0, Explod]
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 13
anim = 1015
ID = 1015
pos = 0, -40 + random%10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 12
scale = 1, 0.4 + (random%2) * 0.1
sprpriority = 3
removeongethit = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000]
type = ScreenBound
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = StopSnd
trigger1 = Time = 120
channel = 8
[State 440, 4]
type = destroyself
trigger1 = time = 120

;-------------------
;josuke
[Statedef 101940]
physics = N
poweradd= 0
anim = 101940
sprpriority = 1

[State 100, 3]
type = velset
trigger1 = time = 80
x = 1.3

[State 100, 3]
type = velset
trigger1 = time = 170
x = 0

[State 903, vo]
type = playsnd
trigger1 = time = 170
value = 194, 5
channel = 0

[State 0, pos]
type = posadd
trigger1 = time = [170, 280]
x = 1*ifelse(time%2=0,-2,2)

[state 300001, helper]
type = helper
trigger1 = time = 240
helpertype = normal
name = "gomi_1_1"
postype = p1
pos = 0,0
stateno = 101950

[state 300001, helper]
type = helper
trigger1 = time = 240
helpertype = normal
name = "gomi_1_2"
postype = p1
pos = 0,0
stateno = 101960

[state 300001, helper]
type = helper
trigger1 = time = 240
helpertype = normal
name = "gomi_1_3"
postype = p1
pos = 0,0
stateno = 101970

[State 440, 4]
type = destroyself
trigger1 = time = 240

;-------------------
;okuuyasu
[Statedef 101941]
physics = N
anim = 101941
sprpriority = 1

[State 100, 3]
type = velset
trigger1 = time = 90
x = 1.3

[State 100, 3]
type = velset
trigger1 = time = 190
x = 0

[State 0, pos]
type = posadd
trigger1 = time = [190, 280]
x = 1*ifelse(time%2=0,-2,2)

[State 903, vo]
type = playsnd
trigger1 = time = 190
value = 194, 5
channel = 0

[state 300001, helper]
type = helper
trigger1 = time = 240
helpertype = normal
name = "gomi_2_1"
postype = p1
pos = 0,0
stateno = 101951

[state 300001, helper]
type = helper
trigger1 = time = 240
helpertype = normal
name = "gomi_2_2"
postype = p1
pos = 0,0
stateno = 101961

[State 440, 4]
type = destroyself
trigger1 = time = 240

;-------------------
;josuke part 1
[Statedef 101950]
physics = N
ctrl = 0
anim = 101950
sprpriority = 1

[State 100, 3]
type = veladd
trigger1 = time >= 60
y = .3

[state 6520]
type = trans
trigger1 = time >= 60
trans = addalpha
alpha = 256-(time-60)*16,0+(time-60)*16

[State 440, 4]
type = destroyself
trigger1 = time = 80

;-------------------
;josuke part 2
[Statedef 101960]
physics = N
ctrl = 0
anim = 101960
sprpriority = 1

[state 6520]
type = trans
trigger1 = time >= 60
trans = addalpha
alpha = 256-(time-60)*16,0+(time-60)*16

[State 440, 4]
type = destroyself
trigger1 = time = 80

;-------------------
;josuke part 3
[Statedef 101970]
physics = N
ctrl = 0
anim = 101970
sprpriority = 1

[state 6520]
type = trans
trigger1 = time >= 60
trans = addalpha
alpha = 256-(time-60)*16,0+(time-60)*16

[State 440, 4]
type = destroyself
trigger1 = time = 80

;-------------------
;okuyasu part 1
[Statedef 101951]
physics = N
ctrl = 0
anim = 101951
sprpriority = 1

[State 100, 3]
type = veladd
trigger1 = time >= 60
y = .3

[state 6520]
type = trans
trigger1 = time >= 60
trans = addalpha
alpha = 256-(time-60)*16,0+(time-60)*16

[State 440, 4]
type = destroyself
trigger1 = time = 80

;-------------------
;okuyasu part 2
[Statedef 101961]
physics = N
ctrl = 0
anim = 101961
sprpriority = 1

[state 6520]
type = trans
trigger1 = time >= 60
trans = addalpha
alpha = 256-(time-60)*16,0+(time-60)*16

[State 440, 4]
type = destroyself
trigger1 = time = 80

;---------------------------------------------------------------------------
;taunt
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0
sprpriority = 1

[State 903, vo]
type = playsnd
trigger1 = time = 1
value = 199, random%2
channel = 0

[State 195, end]
type = ChangeState
trigger1 = time > 120
value = 0
ctrl = 1

;===========================================================================
; attack
;===========================================================================
;5A
[Statedef 200]
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 200
sprpriority = 1

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(2) >= 0
var(4)= 1
ignorehitpause = 1

[State 200, vo]
type = PlaySnd
trigger1 = time = 1
value = 200,(random%2)
channel = 0

[State 200, se]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,0
channel = 1

[State 200, �q�b�g��`]
type = HitDef
triggerall = (!movecontact && !movereversed)
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
attr = S, NA
animtype  = Light
damage    = ceil(30*fVar(10)),0
guardflag = MA
pausetime = 11,11
sparkno = s6000
guard.sparkno = s6040
sparkxy = -10,-62
hitsound   = s5,0
guardsound = s10,0
priority = 4, Hit
ground.type = High
ground.slidetime = 16
guard.slidetime = 14
ground.hittime  = 14
ground.velocity = -4
air.velocity = -2.8, -3.8 + fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 40,0
givepower = 20,0
fall = 0
air.fall = ifelse(p2Movetype=H,1,0)
fall.recover = 0
down.bounce = 0
sprpriority = 1

[State 200, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;5B
[Statedef 210]
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 1

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(3) >= 0
var(4)= 1
ignorehitpause = 1

[State 200, pa]
type = PosAdd
trigger1 = animelemtime(3) = 0
x = 12

[State 200, w]
type = Width
trigger1 = (AnimElemTime (3) >= 0) && (AnimElemTime (4) < 0)
value = 10,0

[State 200, vo]
type = PlaySnd
trigger1 = time = 1
value = 210,0+(random%2)
channel = 0

[State 200, se]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,1
channel = 1

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = medium
damage    = ceil(50*fVar(10)),0
guardflag = MA
pausetime = 11,11
sparkno = s6001
guard.sparkno = s6040
sparkxy = -10,-82
hitsound   = s5,1
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 16
guard.slidetime = 14
ground.hittime  = 14
ground.velocity = -4
air.velocity = -2.8, -3.8 + fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 50,0
givepower = 25,0
fall = 0
air.fall = ifelse(p2Movetype=H,1,0)
fall.recover = 0
down.bounce = 0
sprpriority = 1

[State 200, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;5C
[Statedef 220]
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 220
sprpriority = 1

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(3) >= 0
var(4)= 1
ignorehitpause = 1

[State 200, w]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (3) < 0)
value = 10,0

[State 200, pa]
type = PosAdd
trigger1 = animelemtime(3) = [0, 2]
x = 8

[State 200, vo]
type = PlaySnd
trigger1 = time = 1
value = 220,0+(random%2)
channel = 0

[State 200, se]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,4
channel = 1

[State 0, end]
type = removeexplod
trigger1 = time = 25
id = 226

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Hard
damage    = ceil(70*fVar(10)),0
guardflag = MA
pausetime = 13,13
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-72
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = High
ground.slidetime = 16
guard.slidetime = 16
ground.hittime  = 16
ground.velocity = -1.2, -10 + fVar(20)
guard.velocity = -3.5
air.velocity = -1.2, -9 + fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 60,0
givepower = 30,0
fall = 1
air.fall = ifelse(p2Movetype=H,1,0)
fall.recover = 0
down.bounce = 0

[State 200, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;5C(S)
[Statedef 225]
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 225
sprpriority = 2

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 32,0

[State 0, anim]
type = changeanim
trigger1 = root,var(19)
trigger1 = animelem = 6
value = anim
elem = 5

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = !(root,stateno = 220)
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5

[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 220
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 7201
id = 7201
pos = 30,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 220
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 8201
id = 8201
pos = 30,-60
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
trigger2 = root,stateno != 220
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
value = 12,1

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 220 && root,stateno != 420 && root,stateno != 1200
value = 10000

;---------------------------------------------------------------------------
;2A
[Statedef 400]
type    = C
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 400
sprpriority = 2

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(2) >= 0
var(4)= 1
ignorehitpause = 1

[State 200, vo]
type = PlaySnd
trigger1 = time = 1
value = 200,(random%2)
channel = 0

[State 200, se]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,0
channel = 1

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
animtype  = Light
damage    = ceil(28*fVar(10)),0
guardflag = L
pausetime = 11,11
sparkno = s6000
guard.sparkno = s6040
sparkxy = -10,-15
hitsound   = s5,0
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 12
guard.slidetime = 10
ground.hittime  = 10
ground.velocity = -4
air.velocity = -2.8, -3.8 + fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 40,0
givepower = 20,0
fall = 0
air.fall = ifelse(p2Movetype=H,1,0)
fall.recover = 0
down.bounce = 0

[State 200, �X�e�[�g�ύX]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;2B
[Statedef 410]
type    = C
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 410
sprpriority = 2

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(3) >= 1
var(4)= 1
ignorehitpause = 1

[State 200, w]
type = Width
trigger1 = (AnimElemTime (1) >= 1) && (AnimElemTime (4) < 0)
value = 20,0

[State 200, vo]
type = PlaySnd
trigger1 = !time
value = 410,0+(random%2)
channel = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = C, NA
animtype  = Medium
damage    = ceil(47*fVar(10)),0
guardflag = M
pausetime = 11,11
sparkno = s6001
guard.sparkno = s6040
sparkxy = -10,-50
hitsound   = s5,1
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 16
ground.hittime  = 16
guard.slidetime = 14
guard.hittime  = 14
guard.ctrltime  = 14
ground.velocity = -4
air.velocity = -2.8, -3.8 + fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 50,0
givepower = 25,0
fall = 0
air.fall = ifelse(P2Movetype=H,1,0)
fall.recover = 0
down.bounce = 0
sprpriority = 2

[State 200, �X�e�[�g�ύX]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;2B(S)
[Statedef 415]
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 415
sprpriority = 2

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, btr]
type = bindtoroot
trigger1 = animelemtime(2) < 0
pos = 10,0
[State 0, btr]
type = bindtoroot
trigger1 = animelemtime(2) >= 0
pos = 16,0

[State 200, se]
type = PlaySnd
trigger1 = AnimElem = 8
value = 3,3

[State 0, anim]
type = changeanim
trigger1 = root,var(19)
trigger1 = animelem = 5
value = anim
elem = 4

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = !(root,stateno = 410)
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5

[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 410
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 7201
id = 7201
pos = 0,-20
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 410
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 8201
id = 8201
pos = 0,0
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
trigger2 = root,stateno != 410
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
value = 12,1

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = root,stateno != 410 
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420])
value = root,stateno + 5

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 410 && root,stateno != 1200
value = 10000

;---------------------------------------------------------------------------
;2C
[Statedef 420]
type    = C
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 420
sprpriority = 2

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(2) >= 0
var(4)= 1
ignorehitpause = 1

[State 200, w]
type = Width
trigger1 = (AnimElemTime (3) >= 0) && (AnimElemTime (6) < 0)
value = 10,0

[State 200, vo]
type = PlaySnd
trigger1 = !time
value = 420,0+(random%2)
channel = 0

[State 200, se]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,4
channel = 1

[State 0, explod]
type = explod
trigger1 = animelemtime(1) = 0
anim = 421
id = 421
facing = 1
postype = p1
pos = -5,0
sprpriority = 1
ownpal = 1
removeongethit = 1
bindtime = -1
scale = .5,.6
ignorehitpause = 0

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 2
attr = C, NA
animtype  = hard
damage    = ceil(80*fVar(10)),0
guardflag = L
pausetime = 13,13
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-32
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 22
guard.slidetime = 20
ground.hittime  = 20
guard.hittime  = 16
ground.velocity = -2.6, -3 + fVar(20)
air.velocity = -2.6, -3 + fVar(20)
guard.velocity = -3.5
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 80,0
givepower = 40,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
sprpriority = 2

[State 200, �X�e�[�g�ύX]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;5C(S)
[Statedef 425]
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 425
sprpriority = 2

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 10,0

[State 0, anim]
type = changeanim
trigger1 = root,var(19)
trigger1 = animelem = 4
value = anim
elem = 3

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = !(root,stateno = 420)
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5

[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 420
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 7201
id = 7201
pos = 30,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 420
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 8201
id = 8201
pos = 30,-60
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
trigger2 = root,stateno != 420
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
value = 12,1

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 420
value = 10000

;---------------------------------------------------------------------------
;JA
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(2) >= 0
var(4)= 1
ignorehitpause = 1

[State 600, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(1)= 0

[State 600, v]
type = VarSet
triggerall = movecontact || movereversed
trigger1 = AnimElemTime(2) >= 0
var(1)= 1
ignorehitpause = 1

[State 600, se]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,0
channel = 1

[State 200, vo]
type = PlaySnd
trigger1 = var(8) = 0
trigger1 = time = 1
value = 600,0+(random%2)
channel = 0

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype  = light
damage    = ceil(36*fVar(10)),0
guardflag = HA
pausetime = IfElse(var(8) > 0, 30, 11), IfElse(var(8) > 0, 30, 11)
sparkno = -1
guard.sparkno = s6040
sparkxy = -36,-60
hitsound   = -1
guardsound = s10,0
priority = 4, Hit
ground.type = high
ground.slidetime = IfElse(var(8) > 0, 30, 16)
ground.hittime  = IfElse(var(8) > 0, 30, 16)
guard.hittime = 16
guard.ctrltime = 16
ground.velocity = -4
guard.velocity = IfElse(var(8) > 0, -11, -4)
air.velocity = -2.8, -3.8 + fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 40,0
givepower = 20,(var(8)>0)*300
fall = 0
air.fall = ifelse(p2Movetype=H || var(8) > 0,1,0)
fall.recover = 0
down.bounce = 0

[State 0, assault]
type = playsnd
trigger1 = MoveHit = 1
value = 5, IfElse(var(8) > 0, 12, 0)
ignorehitpause = 1
persistent = 0

[State 0, assault]
type = explod
trigger1 = MoveHit = 1
anim = IfElse(var(8) > 0, 6700, 6000)
pos = 36,-60
postype = p1
sprpriority = 3
ownpal = 1
scale = 1, 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
persistent = 0

[state 300001, helper]
type = helper
trigger1 = var(8) > 0
trigger1 = TeamMode != Simul
trigger1 = MoveContact = 1
helpertype = normal
name = "Zoom"
postype = p1
pos = 0,0
stateno = 705
id = 705
ignorehitpause = 1
persistent = 0

[State 600, sts]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
statetype = A
movetype= I

[State 3001, w]
type = Width
trigger1 = 1
edge = 5,0

;---------------------------------------------------------------------------
;JB
[Statedef 610]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
anim = 610
sprpriority = 1

[State 100, 3]
type = veladd
trigger1 = 1
y = IfElse(var(8) > 0, 0.6, Const(movement.yaccel))

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(2) >= 0
var(4)= 1
ignorehitpause = 1

[State 600, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(1)= 0

[State 600, v]
type = VarSet
triggerall = movecontact || movereversed
trigger1 = AnimElemTime(2) >= 0
var(1)= 1
ignorehitpause = 1

[State 200, w]
type = Width
trigger1 = (AnimElemTime (1) >= 0) && (AnimElemTime (3) < 6)
value = 10,0


[State 600, se]
type = PlaySnd
trigger1 = AnimElem = 2;3
value = 3,1
channel = 1

[State 200, vo]
type = PlaySnd
trigger1 = var(8) = 0
trigger1 = time = 1
value = 610,0+(random%2)
channel = 0

[State 200, hit]
type = HitDef
triggerall = !movecontact
trigger1 = AnimElem = 2
attr = A, NA
animtype  = medium
damage    = ceil(56* (1+((var(8) > 0)*0.5)) *fVar(10)),0
guardflag = HA
pausetime = IfElse(var(8) > 0, 30, 11), IfElse(var(8) > 0, 30, 11)
sparkno = -1;s6001
guard.sparkno = s6040
sparkxy = -50,-60
hitsound   = -1;s5,1
guardsound = s10,0
priority = 4, Hit
ground.type = high
ground.slidetime = IfElse(var(8) > 0, 30, 16)
ground.hittime  = IfElse(var(8) > 0, 30, 16)
guard.hittime = 16
guard.ctrltime = 16
ground.velocity = -4
guard.velocity = IfElse(var(8) > 0, -11, -4)
air.velocity = IfElse(var(8) > 0, -2, -2.8), IfElse(var(8) > 0, -8, -3.8 + fVar(20))
airguard.velocity = IfElse(var(8) > 0, -11, -2.8), -1.4
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 50,0
givepower = 25,(var(8)>0)*300
fall = 0
air.fall = ifelse(p2Movetype=H || var(8) > 0,1,0)
fall.recover = 0
down.bounce = 0
sprpriority = 1

[State 0, assault]
type = playsnd
trigger1 = MoveHit = 1
value = 5, IfElse(var(8) > 0, 12, 1)
ignorehitpause = 1
persistent = 0

[State 0, assault]
type = explod
trigger1 = MoveHit = 1
anim = IfElse(var(8) > 0, 6700, 6001)
pos = 50,-60
postype = p1
sprpriority = 3
ownpal = 1
scale = 1, 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
persistent = 0

[state 300001, helper]
type = helper
trigger1 = var(8)
trigger1 = TeamMode != Simul
trigger1 = MoveContact = 1
helpertype = normal
name = "Zoom"
postype = p1
pos = 0,0
stateno = 705
id = 705
ignorehitpause = 1
persistent = 0

[State 600, sts]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
statetype = A
movetype= I

[State 100, 3]
type = ChangeState
trigger1 = vel y > 0 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
;JB(S)
[Statedef 615]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 615
sprpriority = 2

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 20,0

[State 0, anim]
type = changeanim
trigger1 = root,var(19)
trigger1 = animelem = 4
value = anim
elem = 3

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = [1000,1100]) || (root,stateno = 2000||root,stateno = 2100||root,stateno = 2200) || (root,stateno = 3000)
value = root,stateno + 50

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = !(root,stateno = 610)
trigger1 = (root,stateno = [200,220]) || (root,stateno = 410) || (root,stateno = [610,620])
value = root,stateno + 5

[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 610
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 7201
id = 7201
pos = 40,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 610
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 8201
id = 8201
pos = -10,-60
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
trigger2 = root,stateno != 610
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
value = 12,1

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 610
value = 10000

;---------------------------------------------------------------------------
;JC
[Statedef 620]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
anim = 620
sprpriority = 1

[State 100, 3]
type = veladd
trigger1 = 1
y = IfElse(var(8) > 0, 0.6, Const(movement.yaccel))

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(2) >= 0
var(4)= 1
ignorehitpause = 1

[State 200, w]
type = Width
trigger1 = (AnimElemTime (1) >= 0) && (AnimElemTime (3) < 6)
value = 10,0

[State 200, vo]
type = PlaySnd
trigger1 = var(8) = 0
trigger1 = time = 1
value = 620,0+(random%2)
channel = 0

[State 600, se]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,3
channel = 1

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 2
attr = A, NA
animtype  = hard
damage    = ceil(79* (1+((var(8) > 0)*0.5)) *fVar(10)),0
guardflag = HA
pausetime = IfElse(var(8) > 0, 30, 11), IfElse(var(8) > 0, 30, 11)
sparkno = -1;s6002
guard.sparkno = s6040
sparkxy = -30,-30
hitsound   = -1;s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = high
ground.slidetime = IfElse(var(8) > 0, 30, 16)
ground.hittime  = IfElse(var(8) > 0, 30, 16)
guard.hittime = 16
guard.ctrltime = 16
ground.velocity = -4
guard.velocity = IfElse(var(8) > 0, -11, -4)
air.velocity = IfElse(var(8) > 0, -2, -2.8), IfElse(var(8) > 0, -8, -3.8 + fVar(20))
airguard.velocity = IfElse(var(8) > 0, -11, -2.8), -1.4
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 80,0
givepower = 40,(var(8)>0)*300
fall = 0
air.fall = ifelse(p2Movetype=H || var(8) > 0,1,0)
fall.recover = 0
down.bounce = 0
guard.kill = 0
sprpriority = 1

[State 0, assault]
type = playsnd
trigger1 = MoveHit = 1
value = 5, IfElse(var(8) > 0, 12, 2)
ignorehitpause = 1
persistent = 0

[State 0, assault]
type = explod
trigger1 = MoveHit = 1
anim = IfElse(var(8) > 0, 6700, 6002)
pos = 30,-30
postype = p1
sprpriority = 3
ownpal = 1
scale = 1, 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
persistent = 0

[state 300001, helper]
type = helper
trigger1 = var(8)
trigger1 = TeamMode != Simul
trigger1 = MoveContact = 1
helpertype = normal
name = "Zoom"
postype = p1
pos = 0,0
stateno = 705
id = 705
ignorehitpause = 1
persistent = 0

[State 600, set]
type = StateTypeSet
trigger1 = AnimElemTime(3) >= 0
statetype = A
movetype= I

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 100, 3]
type = ChangeState
trigger1 = vel y > 0 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
;JC(S)
[Statedef 625]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 625
sprpriority = 2

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 20,0

[State 0, anim]
type = changeanim
trigger1 = root,var(19)
trigger1 = animelem = 4
value = anim
elem = 3

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = !(root,stateno = 620)
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5

[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 620
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 7201
id = 7201
pos = 30,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = animtime = -1
trigger2 = root,stateno != 620
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
anim = 8201
id = 8201
pos = 30,-60
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
trigger2 = root,stateno != 620
trigger2 = ((root,stateno != [1000,1999]) && root,movetype = H)
value = 12,1

[State 0, end]
type = changestate
trigger1 = !animtime
trigger2 = root,stateno != 620
value = 10000

;---------------------------------------------------------------------------
;assault
[Statedef 700]
type    = S
physics = N
ctrl = 0
anim = 700
sprpriority = 0
velset = 0,0
powerAdd = 50

[State 100, 1]
type = varset
trigger1 = !time
var(8) = 1

[State 40, HitBy]
type = HitBy
trigger1 = Time < 8
value = SCA, NA,SA,HA,NP,SP,HP

[State 0, explod]
type = explod
trigger1 = Time = 3
anim = 111
facing = -1
postype = p1
pos = 0,-80
sprpriority = 0
ownpal = 1
bindtime = 1
removeongethit = 1
scale = 1,1;.5,.5
angle = -45
persistent = 0

[State 0, explod]
type = explod
trigger1 = Time = 8
anim = 6070
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
Scale = 0.5,0.5

[State 0, snd]
type = playsnd
trigger1 = Time = 1
value = 700, random%2
channel = 0

[State 100, 1]
type = playsnd
trigger1 = Time = 8
value = 3,8

[State 100, 1]
type = VelSet
trigger1 = Time = 8
x = IfElse(P2Dist x / 32 <= 0.5, 0.5, IfElse(P2Dist x / 32 > Const(velocity.jump.fwd.x)*2, Const(velocity.jump.fwd.x)*2, P2Dist x / 32))
y = -8.4

[State 100, 3]
type = veladd
trigger1 = Time >= 8
y = IfElse(Time >= 18, 0.6, 0.5)

[State 100, 3]
type = velmul
trigger1 = Time = 18
x = .8

[State 0, state]
type = statetypeset
trigger1 = Time = 8
statetype = A
ignorehitpause = 1

[State -3, ExShadow]
type = afterimage
trigger1 = time = 1
time = 40
timegap = 3
framegap = 1
length = 8
palbright = 32,32,32
palcontrast = 128,128,128
paladd = 256, 32, 32
trans = add
ignorehitpause = 1

[State 100, 3]
type = ChangeState
trigger1 = vel y > 0 && pos y >= 0
value = 52

;-----------------------------------------------------------------------------
[Statedef 705]
type = A
velset = 0, 0
anim = 9999
sprpriority = 5

[State 3000, ZOOM]
type = zoom
trigger1 = time<=4
scale = 1 + (0.0625*time)
pos = root, pos x+5*(root,facing), root, pos y
ignorehitpause = 1

[State 3000, ZOOM]
type = zoom
trigger1 = time>4
trigger1 = time<=30-4
scale = 1.25
pos = root, pos x+5*(root,facing), root, pos y
ignorehitpause = 1

[State 3000, ZOOM]
type = zoom
trigger1 = time>30-4
trigger1 = time<=30
scale = 1.25 - (0.0625*(time-(30-4)))
pos = root, pos x+5*(root,facing), root, pos y+((time-(30-4))*5)
ignorehitpause = 1

[State 8500, End]
type = DestroySelf
trigger1 = Time >= 30

;===========================================================================
;adg
[Statedef 710]
type = U
movetype = H
physics = N
ctrl = 0
velset = 0,0
poweradd = -500

;bg
[State 0, snd]
type = bgpalfx
trigger1 = !time
add = 128-time*32,128-time*32,128-time*32
time = 4
ignorehitpause = 1

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 710
id = 710
pos = 20,-60
postype = p1
scale =1,1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
pausemovetime = 99999
supermovetime = 99999

[State 0, snd]
type = playsnd
trigger1 = !time
value = 710,random%2
channel = 10

[State 0, snd]
type = playsnd
trigger1 = !time
value = 715,0

[State 0, vel]
type = pause
trigger1 = !time
time = 15

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "AVG"
stateno = 715
id = 715
pos = -10,0
postype = p1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.ground.back = 20
size.ground.front = 20
size.height = 240

[State 0, anim]
type = changeanim
trigger1 = !var(59)
trigger1 = time >= 0 && command != "holddown"
value = 150

[State 0, anim]
type = changeanim
trigger1 = !var(59)
trigger1 = time >= 0 && command = "holddown"
value = 151


[State 0, state]
type = statetypeset
trigger1 = !var(59)
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = !var(59)
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, nhb]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 0, end]
type = changestate
trigger1 = time = 1
value = 151+(command = "holddown")*2

;---------------------------------------------------------------------------
;adv
[Statedef 711]
type = U
movetype = I
physics = N

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151

[State 0, state]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, end]
type = changestate
trigger1 = numhelper(715)
trigger1 = command = "holdback"
value = 151+(command = "holddown")*2

[State 0, end]
type = changestate
trigger1 = !numhelper(715)
value = 130+(command = "holddown")
ctrl = 1

;---------------------------------------------------------------------------
;adv2
[Statedef 715]
type = S
movetype = I
physics = N
anim = 715
velset = 0,0

[State 0, push]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = time = 15
x = 20

[State 0, end]
type = DestroySelf
trigger1 = root,stateno != [700,799]
trigger1 = root,stateno != [120,159]
trigger2 = root,stateno = 150 || root,stateno = 152

;---------------------------------------------------------------------------
;ガーキャン
[Statedef 720]
type    = S
movetype= A
physics = N
poweradd= -1000
ctrl = 0
velset = 0,0
anim = 720
sprpriority = 2

[State 0, pal]
type = palfx
trigger1 = !time
sinadd = 128,128,128,2
time = 4
ignorehitpause = 1

[state 0, helper]
type = helper
trigger1 = !time
name = "gc"
stateno = 725
id = 725
postype = p1
pos = 0,0
ownpal = 1
size.xscale = 1
size.yscale = 1
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

[State 0, snd]
type = playsnd
trigger1 = !time
value = 720, random%2
channel = 10

[State 0, snd]
type = playsnd
trigger1 = !time
value = 715,0

[State 0, super]
type = pause
trigger1 = time = 0
time = 30
movetime = 30

[State 200, 音を鳴らす]
type = nothitby
trigger1 = time <= 35
value = SCA

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3,2
channel = 1

[State 0, vel]
type = posadd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
x = 12

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA
animtype  = Midium
damage    = ceil(64*fVar(10)),0
guardflag = MA
pausetime = 16,16
sparkno = s6001
guard.sparkno = s6040
sparkxy = -10,-65
hitsound   = s5,2
guardsound = s10,0
priority = 7, Hit
ground.type = High
ground.slidetime = 12
guard.slidetime = 10
ground.hittime  = 10
ground.velocity = -7,-3 + fVar(20)
air.velocity = -7,-3 + fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 0,0
fall = 1
air.fall = 1;ifelse(EnemyNear,Movetype=H,1,0)
fall.recover = 1
fall.recovertime = 18
down.bounce = 0
kill = 0

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;==============================================================================
;ガードキャンセルエフェクト
[Statedef 725]
ctrl = 0
anim = 20000

[State 0, bgpal]
type = bgpalfx
trigger1 = time < 13
time = 1
mul = 32+ceil(18.6*time),32+ceil(18.6*time),96+ceil(13.2*time)
color = 128+ceil(12.8*time)

[State 0, explod]
type = explod
trigger1 = !time
anim = 725
id = 725
postype = p1
pos = 21, -70
scale = .5, .5
sprpriority = 3
ownpal = 1
pausemovetime = -1
supermovetime = -1

[State 0, end]
type = DestroySelf
trigger1 = time = 30

;---------------------------------------------------------------------------
;throw
[Statedef 800]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, v]
type = Varset
trigger1 = Time = 0
trigger1 = command != "holdback"
var(20) = 1

[State 800, v]
type = Varset
trigger1 = Time = 0
trigger1 = command != "holdfwd"
trigger1 = command = "holdback"
var(20) = -1

[State 800, ad]
type = AttackDist
trigger1 = 1
value = 0

[State 200, vo]
type = PlaySnd
trigger1 = !time
value = 800,0+(random%2)
channel = 0

[State 800, hit]
type = HitDef
trigger1 = Animelem = 2
trigger1 = P2Movetype != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
hitflag = M-
priority = 1, Miss
sparkno = -1
p1facing = ifelse((var(20)=-1),-1,1)
p2facing = 1
p1stateno = 810
p2stateno = 820
guard.dist = 0
numhits = 0
fall = 1

[State 800, �X�e�[�g�ύX]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;throw success
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
poweradd = 40
sprpriority = -1

[State 3001, Width]
type = Width
trigger1 = 1
edge = 120,0

[State 0, explod]
type = explod
trigger1 = AnimElemTime(4) = 0
anim = 6001
id = 6001
facing = 1
postype = p2
pos = -10,-83
sprpriority = 3
ownpal = 1
bindtime = 1
removeongethit = 1
scale = 1,1

[State 810, nhb]
type = nothitby
trigger1 = 1
value = SCA
[State 810, nhb]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, se]
type = PlaySnd
trigger1 = !time
value = 1,0

[State 810, se]
type = PlaySnd
trigger1 = !time
value = 810, random%2
channel = 0

[State 810, se]
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 5,5

[State 810, bind]
type = TargetBind
trigger1 = AnimElemTime(4) < 0
pos = 40, 0

[State 810, damage]
type = TargetLifeAdd
trigger1 = AnimElemTime(4) = 0
value = -140

[State 800, throwhosei]
type = Varset
trigger1 = AnimElemTime(4) = 0
var(14) = 1

[State 810, spr]
type = SprPriority
trigger1 = AnimElemTime(3) = 0
value = 1

[State 810, target]
type = TargetState
trigger1 = AnimElemTime(4) = 0
value = 821

[State 810, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;enemy
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, anim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

[State 820, se]
type = SelfState
trigger1 = time = 60
value = 5050

;---------------------------------------------------------------------------
;enemy2
[Statedef 821]
type    = U
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State 7000, VarSet]
type = playerpush
trigger1 = 1
value = 0

[State 0, pos]
type = posadd
trigger1 = time <= 13
x = 1*ifelse(time%2=0,-1,1)

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time <= 13
value = 5002
elem = animelemno(0)

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 13
value = IfElse(SelfAnimExist(5052), 5052, 5050)

[State 5050, 2] ;Coming down anim
type = ChangeAnim
triggerall = time >= 6
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 7000, VarSet]
type = velset
trigger1 = time = 13
x = -7.6
y = -1.9

[State 7000, VarSet]
type = veladd
trigger1 = time >= 13
y = .4

[State 821, end]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;===========================================================================
;kuzureoti
[Statedef 5950]
type    = A
movetype= H
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
sprpriority = 1

[State 0, pos]
type = posadd
trigger1 = time < 60
x = 1*ifelse(time%2=0,-1,1)

[State 200, �X�e�[�g�ύX]
type = Changeanim
trigger1 = time < 60
value = 5011

[State 200, �X�e�[�g�ύX]
type = Changeanim
trigger1 = time = 60
trigger1 = SelfAnimExist(5950)
value = 5950

[State 200, �X�e�[�g�ύX]
type = Changeanim2
trigger1 = time = 60
trigger1 = !SelfAnimExist(5950)
value = 950

[State 200, �X�e�[�g�ύX]
type = selfstate
trigger1 = anim = 5950
trigger1 = animtime = 65 || !animtime
trigger2 = anim = 950
trigger2 = !animtime
value = 5120

;===========================================================================
; hissatsu
;===========================================================================
;236
[Statedef 1000]
type    = S
movetype= A
physics = N
poweradd= 50
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 1

[State 0, command]
type = VarSet
trigger1 = Time = 0
var(20) = 0

[State 0, command]
type = VarSet
trigger1 = !AILevel
trigger1 = command = "236z"
var(20) = 2

[State 0, var]
type = VarSet
trigger1 = AILevel
var(20) = (P2Bodydist x > 120 && random % 2 = 0)*2

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 1000,0
channel = 0

[State 1000, end]
type = ChangeState
trigger1 = time > 0
trigger1 = helper(10000),stateno = 10000
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;236(Stand)
[Statedef 1050]
type = U
movetype = A
physics = N
ctrl = 0
sprpriority = 2

[State 10000, ScreenBound]
type = ChangeAnim
trigger1 = Time = 0
value = 1050
ignorehitpause = 1

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 1000)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1

;/template

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(8)= 0

[State 0, var]
type = varset
trigger1 = !time
var(20) = root,var(20)

[State 0, ]
type = changeanim
trigger1 = Time = 0
value = 1050 + var(20)

[State 0, btr]
type = bindtoroot
trigger1 = time = 0
pos = 25,0

[State 0, end]
type = varset
trigger1 = movehit = 1
var(49) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(49)
var(13) = 1

[State 0, end]
type = poweradd
trigger1 = AnimElemTime(22) >= 0
trigger1 = var(49)
value = 100
ignorehitpause = 1
[State 0, end]
type = varset
trigger1 = var(49)
var(49) = 0
ignorehitpause = 1

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(4)= 0

[State 200, v]
type = VarSet
trigger1 = MoveContact
trigger1 = numTarget(1050)
var(4)= 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 2
value = 1001,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 1001,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 10
value = 1001,4

[State 1100, Hado FX]
type = Explod
trigger1 = Time = 5
ID = 1014
anim = 1014
pos = 3,15
postype = p1
ownpal = 1
removetime = IfElse(var(20) = 2, 16, 10)
bindtime = -1
sprpriority = 5
ignorehitpause = 1
scale = .75,.75
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 15
trigger3 = AnimElem = 21
anim = 1302
ID = 1302
pos = 52,-17
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1,1
sprpriority = 5
removeongethit = 1
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 10
trigger2 = AnimElem = 16
trigger3 = AnimElem = 22
anim = 1316
ID = 1316
pos = 20,-75
postype = p1  ;p2,front,back,left,right
facing = facing
vfacing = 1
bindtime = 1
removetime = -2
scale = .35,.35
sprpriority = 6
removeongethit = 1

[State 1000, vel]
type = VelSet
trigger1 = AnimElemTime(8) = 0
trigger2 = AnimElemTime(14) = 0
trigger3 = AnimElemTime(20) = 0
x = IfElse(var(20) = 2, 10.2, 6)

[State 1000, vel]
type = VelMul
trigger1 = AnimElemTime(8) >= 0
x = .82

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 10
trigger2 = AnimElem = 16
attr = S, SA
animtype  = medium
damage    = ceil(20*root,fVar(10)), ceil(20*.5*root,fVar(10))
guardflag = L
hitflag = MAFD
pausetime = 0,9
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-12
hitsound   = s5, 1
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
guard.slidetime = 18
ground.velocity = -1.5
guard.velocity = -2
air.velocity = -1.5, 6.5
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
sprpriority = 2
id = 1050

[State 3001, 6]
type = targetState
trigger1 = numTarget(1050)
trigger1 = Target(1050),statetype = A || Target(1050),statetype = L
trigger1 = movehit = 1
value = 5113
id = 1050

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 22
attr = S, SA
animtype  = diagup
damage = ceil(80*root,fVar(10)),ceil(80*.5*root,fVar(10))
guardflag = MA
hitflag = MAFD
pausetime = 0,16
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-12
hitsound   = s5, 5
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
guard.slidetime = 18
ground.velocity = -6,-3.5
guard.velocity = -2
air.velocity = -6,-3.5
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 50,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
sprpriority = 2
id = 1051

;--- 相殺 ---
[State 1100, Helper]
type = helper
trigger1 = AnimElem = 10
trigger2 = AnimElem = 16
trigger3 = AnimElem = 22
trigger1 = !numhelper(1070)
helpertype = normal
name = "kezuritotte"
stateno = 1070
ID = 1070
postype = p1
pos = 0,0

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = numtarget(1051)
trigger1 = movecontact = 1
var(8) = 16
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
value = 12,1

[State 0, hitvel]
type = changestate
trigger1 = !animtime
value = 10000

;------------------------------------------------------------------------
;相殺
[Statedef 1070]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1070
sprpriority = 3

;--- アーマー処理 ---
[State 1103, HitBy]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1
ignorehitpause = 1 

[State 1103, HitOverRide]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 1070
time = -1
slot = 1
ignorehitpause = 1

;--- 座標 ---
[State 1103, BindToParent]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = -1

;--- 消滅 ---
[State 1103, End]
type = destroyself
trigger1 = parent,stateno != 1050
trigger2 = parent,animelemtime(11) = 0
trigger3 = parent,animelemtime(17) = 0
trigger4 = parent,animelemtime(23) = 0

;---------------------------------------------------------------------------
;623
[Statedef 1100]
type    = S
movetype= A
physics = N
velset = 0,0
poweradd = 50
anim = 1100
ctrl = 0
sprpriority = 1

[State 0, command]
type = VarSet
trigger1 = Time = 0
var(20) = 0

[State 0, command]
type = VarSet
trigger1 = !AILevel
trigger1 = Time = 0
var(2) = IfElse(command = "623z", 2, 0)

[State 0, command]
type = VarSet
triggerall = AILevel
triggerall = Time = 0
trigger1 = var(59) > 0
trigger2 = p2bodydist x > 60 && random % 3 = 0
var(2) = 2

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 1100, var(2)
channel = 0

[State 1000, end]
type = ChangeState
trigger1 = time > 0
trigger1 = helper(10000),stateno = 1160
value = 1110

[State 1000, end]
type = ChangeState
trigger1 = time > 0
trigger1 = helper(10000),stateno = 10000;helper(10000),animtime = -1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;623 2
[Statedef 1110]
type    = S
movetype= A
physics = N
poweradd= 0
velset = 0,0
ctrl = 0
sprpriority = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, nhb]
type = playerpush
trigger1 = 1
value = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 120,0

[State 1000, end]
type = ChangeState
trigger1 = helper(10000),stateno = 10000
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;623x(Stand)
[Statedef 1150]
type = U
movetype = A
physics = N
ctrl = 0
sprpriority = 2

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 1100)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1

;/template
[State 200, v]
type = VarSet
trigger1 = Time = 0
var(8)= 0

[State 0, var]
type = varset
trigger1 = !time
var(2) = root,var(2)

[State 0, ]
type = changeanim
trigger1 = Time = 0
value = 1150 + var(2)

[State 0, btr]
type = bindtoroot
trigger1 = time = 0
pos = 25,0

[State 0, VelAdd]
type = PosAdd
trigger1 = time < 3
x = 9

[State 200, v]
type = VarSet
trigger1 = Time = 0
trigger2 = animelem = 10
var(4)= 0

[State 200, v]
type = VarSet
trigger1 = (var(2) != 2 || animelemtime(10) < 0)
trigger1 = MoveContact
var(4)= 1
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = movehit = 1
var(49) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(49)
var(13) = 1

[State 0, end]
type = poweradd
trigger1 = var(49)
value = 50
ignorehitpause = 1
[State 0, end]
type = varset
trigger1 = var(49)
var(49) = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1215
ID = 1215
pos = -42,-134
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .85,.73
angle = 35
sprpriority = 5
ignorehitpause = 0
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1217
ID = 1217
pos = 14,-77
postype = p1  ;p2,front,back,left,right
facing = facing
vfacing = 1
bindtime = 1
removetime = -2
scale = .35,.35
sprpriority = 6
removeongethit = 1

[State 0, snd]
type = playsnd
trigger1 = time = 68
value = 12,1

[State 0, nhb]
type = null;nothitby
trigger1 = AnimElemTime(3) <= 0
value = SCA

[State 200, hit]
type = HitDef
trigger1 = var(2) != 2
trigger1 = AnimElem = 3
attr = S, SA
animtype  = diagup
damage    = ceil(82*root,fVar(10)),ceil(82*.20*root,fVar(10))
guardflag = M
pausetime = 0,16
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-70
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 21
ground.hittime  = 21
guard.slidetime = 21
guard.hittime = 21
guard.ctrltime = 21
ground.velocity = -4.5,-5.5 + root,fvar(20)
guard.velocity = -3.5
air.velocity = -4.5,-5.5 + root,fvar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 10,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
sprpriority = 2
id = 1150

[State 200, hit]
type = HitDef
trigger1 = var(2) = 2
trigger1 = AnimElem = 3
attr = S, SA
animtype  = diagup
damage    = ceil(40*root,fVar(10)),ceil(40*.20*root,fVar(10))
guardflag = M
pausetime = 0,11
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-70
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -2.1,-8.5 + root,fvar(20)
guard.velocity = -3.5
air.velocity = -2.1,-8.5 + root,fvar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 10,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
sprpriority = 2
id = 1151

[State 0, PosSet]
type = PosAdd
trigger1 = animelem = 10
x = IfElse(P2Dist x - 5 >= 105, 105, IfElse(P2Dist x - 5 <= 65, 65, P2Dist x -5))
y = -110

[State 0, VelAdd]
type = VelSet
trigger1 = animelem = 11
y = 11

[State 200, hit]
type = HitDef
trigger1 = var(2) = 2
trigger1 = AnimElem = 11
attr = S, SA
animtype  = diagup
damage    = ceil(32*root,fVar(10)), 0
hitflag = MAFD
guardflag = HA
pausetime = 0,0
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,0
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -2.5,-4.5 + root,fvar(20)
guard.velocity = -3.5
air.velocity = -2,-4.5 + root,fvar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 10,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
p2facing = 1
sprpriority = 2
id = 1160

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = Ifelse(var(2) = 0, 16, 11)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = numTarget(1160)
trigger1 = movehit
value = SCA

;--- 相殺 ---
[State 1100, Helper]
type = helper
trigger1 = animelem = 3
trigger1 = !numhelper(1170)
helpertype = normal
name = "hore"
stateno = 1170
ID = 1170
postype = p1
pos = 0,0

[State 3001, 6]
type = targetState
trigger1 = numTarget(1160)
trigger1 = movehit = 1
value = 1180
id = 1160

[State 240, 4]
type = ChangeState
triggerall = var(8) = 0
trigger1 = NumTarget(1160)
trigger1 = Movehit
trigger1 = Target(1160),Stateno = 1180
value = 1160

[State 0, explod]
type = explod
trigger1 = anim = 1150 && AnimTime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = anim = 1150 && AnimTime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = anim = 1150 && AnimTime = -1
value = 12,1

[State 0, hitvel]
type = changestate
trigger1 = anim = 1150 && AnimTime = 0
value = 10000

[State 0, hitvel]
type = changestate
triggerall = var(8) = 0
trigger1 = anim = 1152
trigger1 = vel y > 0 && pos y >= 0
value = 1151

;---------------------------------------------------------------------------
;623 end
[Statedef 1151]
type    = S
movetype= I
physics = N
poweradd= 0
velset = 0,0
anim = 1151
ctrl = 0
sprpriority = 1

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 1100)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1
;/template

[State 0, explod]
type = explod
trigger1 = AnimTime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = AnimTime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = AnimTime = -1
value = 12,1

[State 1000, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 10000

;------------------------------------------------------------------------
;相殺
[Statedef 1170]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1170
sprpriority = 3

;--- アーマー処理 ---
[State 1103, HitBy]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1
ignorehitpause = 1 

[State 1103, HitOverRide]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 1170
time = -1
slot = 1
ignorehitpause = 1

;--- 座標 ---
[State 1103, BindToParent]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = -1

;--- 消滅 ---
[State 1103, End]
type = destroyself
trigger1 = parent,stateno != 1150
trigger2 = parent,animelemtime(7) >= 0

;---------------------------------------------------------------------------
;part 2
[Statedef 1160]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
anim = 1160
sprpriority = 4

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 16
trigger5 = animelem = 20
anim = 6000
ID = 6000
pos = 28,-16
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 24
anim = 6001
ID = 6001
pos = 33,-84
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 1100, 10+random%2
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 16
trigger5 = animelem = 20
value = 5,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 24
value = 5,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = 0,5

[State 0, HitAdd]
type = HitAdd
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 16
trigger5 = animelem = 20
trigger6 = animelem = 24
value = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
trigger4 = animelem = 10
trigger5 = animelem = 12
trigger6 = animelem = 16
trigger7 = animelem = 18
trigger8 = animelem = 20
anim = 2000004
ID = 2000004
pos = -18,-45
postype = p1  ;p2,front,back,left,right
facing = facing
bindtime = 1
accel = 0,0
random = 50,45
removetime = -2
pausemovetime = 0
scale = .35,.35
sprpriority = 6
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
trigger2 = animelem = 7
trigger3 = animelem = 9
trigger4 = animelem = 11
trigger5 = animelem = 13
trigger6 = animelem = 17
trigger7 = animelem = 19
trigger8 = animelem = 21
anim = 2000004
ID = 2000004
pos = 36,-45
postype = p1  ;p2,front,back,left,right
facing = facing
bindtime = 1
accel = 0,0
random = 50,45
removetime = -2
pausemovetime = 0
scale = .35,.35
sprpriority = 6
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[state 300001, helper]
type = helper
trigger1 = time = 0
trigger1 = Root,TeamMode != Simul
helpertype = normal
name = "Zoom"
postype = p1
pos = 0,0
stateno = 1855
id = 1855

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, Posset]
type = Posset
trigger1 = 1
x = 0
y = 0

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !var(37)
trigger1 = animelem = 1
pos = 36,0
postype = P1
time = 1
id = 1160

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 16
trigger5 = animelem = 20
value = ceil(-8 * (root,fvar(10)))
kill = 0
id = 1160

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 24
value = ceil(-20 * (root,fvar(10)))
kill = 1 
id = 1160

[State 0, hitc]
type = ParentVarAdd
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
trigger4 = animelem = 16
trigger5 = animelem = 20
trigger6 = animelem = 24
var(13) = 1

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
value = 12,1

[State 3001, 6]
type = targetState
triggerall = numTarget(1160)
triggerall = root,movetype != H
triggerall = time >= 1
triggerall = root,time >= 1
triggerall = !(root,stateno = 1100)
triggerall = animelemtime(24) < 0
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
trigger9 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = 5113
id = 1160

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = time >= 1
triggerall = root,time >= 1
triggerall = !(root,stateno = 1100)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = time >= 1
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1

[State 440, 4]
type = ChangeState
trigger1 = animtime = 0
value = 10000

;---------------------------------------------------------------------------
;target
[Statedef 1180]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 0

[State 181, nhb]
type = NotHitBy
trigger1 = time < 11
value = SCA

[State 181, nhb]
type = PlayerPush
trigger1 = 1
value = 0

[State 220, Position]
type = PosAdd
trigger1 = time < 11
x = 1*ifelse(time%2=0,-1,1)

[State 1060, 2]
type = changeanim
trigger1 = time < 11
value = 5030

[State 1060, 2]
type = changeanim2
trigger1 = time = 11
value = 1161

[State 1060, 2]
type = changeanim2
trigger1 = time = 47
value = 1163

[State 1060, 2]
type = changeanim
trigger1 = time = 83
value = IfElse(SelfAnimExist(5060), 5060, 5050)

[State 0, VelSet]
type = VelSet
trigger1 = time = 83
y = -4.3
x = -5.9 

[State 820, vel]
type = veladd
trigger1 = time >= 83
y = .5

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 83
trigger1 = SelfAnimExist(5051)
value = 5051

[State 2601, ChangeAnim] ;Change anim when done with transition
type = ChangeAnim
trigger1 = time = 83
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050
persistent = 0

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = time >= 83
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 2] ;Coming down anim
type = selfstate
trigger1 = Time > 83 && Pos Y >= 0 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;214 
[Statedef 1200]
type    = S
movetype = A
physics = N
poweradd = 50
velset = 0,0
ctrl = 0
sprpriority = 1

[State 0, snd]
type = varset
trigger1 = !time
var(2) = ifelse(command="214z", 2, 0)

[State 0, anim]
type = changeanim
trigger1 = !time
value = ifelse(var(2)=2, 1202, 1200)

[State 0, var]
type = Posset
trigger1 = anim != 1210
x = helper(10000),pos x - 15 * facing

[State 1000, end]
type = ChangeAnim
trigger1 = anim != 1210
trigger1 = time > 0
trigger1 = helper(10000),animelemtime(5) > 0
value = 1210

[State 1000, end]
type = ChangeState
trigger1 = time > 0
trigger1 = helper(10000),stateno = 10000
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;214 
[Statedef 1250]
type    = S
movetype = A
physics = N
poweradd = 50
velset = 0,0
ctrl = 0
sprpriority = 2

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 1200)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1

;/template

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(8)= 0

[State 0, var]
type = varset
trigger1 = !time
var(20) = root,var(20)

[State 0, ]
type = changeanim
trigger1 = Time = 0
value = 1050 + var(20)

[State 0, btr]
type = bindtoroot
trigger1 = time = 0
pos = 15,0

[State 0, end]
type = varset
trigger1 = movehit = 1
var(49) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(49)
var(13) = 1

[State 0, end]
type = poweradd
trigger1 = var(49)
value = ifelse(var(2)=2, 80, 60)
ignorehitpause = 1
[State 0, end]
type = varset
trigger1 = var(49)
var(49) = 0
ignorehitpause = 1

[State 200, v]
type = VarSet
trigger1 = AnimElemTime(1) = 0
var(4)= 0

[State 200, v]
type = VarSet
triggerall = movecontact
trigger1 = AnimElemTime(4) >= 0
var(4)= 1
ignorehitpause = 1

[State 0, snd]
type = varset
trigger1 = !time
var(2) = root,var(2)

[State 0, anim]
type = changeanim
trigger1 = !time
value = ifelse(var(2)=2, 1252, 1250)

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 1259
pos = 0,0
postype = p1
facing = -1
bindtime = -1
removetime = -2
sprpriority = 3
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1316
ID = 1316
pos = 52,-98
postype = p1
facing = facing
vfacing = 1
bindtime = 1
removetime = -2
scale = .35,.35
sprpriority = 6
removeongethit = 1

[State 1000, vel]
type = Velset
trigger1 = AnimElemTime(4) = -6
x = IfElse(var(2) = 2, 8.2, 4.7)

[State 1000, vel]
type = VelMul
trigger1 = AnimElemTime(4) > 0
x = .82

[State 1000, vel]
type = VelSet
trigger1 = AnimElemTime(4) = 4
x = 0

[State 0, snd]
type = playsnd
trigger1 = AnimElemTime(4) = 0
value = 0, 4

[State 0, snd]
type = playsnd
trigger1 = AnimElemTime(1) = 0
value = 1200,0 + (var(2)=2)*2
channel = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = var(2) < 2
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Hard
damage    = ceil(66*root,fVar(10)),ceil(66*.20*root,fVar(10))
hitflag = MAF
guardflag = MA
pausetime = 0, 11
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-60
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = High
ground.slidetime = 18
guard.slidetime = 18
ground.hittime  = 18
ground.velocity = -3.5, -6.5 + root,fVar(20)
guard.velocity = -4.5
air.velocity = -3.5, -6.5 + root,fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 40,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -4
air.cornerpush.veloff = -4
id = 1200
sprpriority = 2

[State 200, ヒット定義]
type = HitDef
trigger1 = var(2) = 2
trigger1 = AnimElem = 4
attr = S, SA
animtype  = DiagUp
damage    = ceil(92*root,fVar(10)),ceil(92*.20*root,fVar(10))
hitflag = MAF
guardflag = MA
pausetime = 0, 16
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-60
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = High
ground.slidetime = 18
guard.slidetime = 18
ground.hittime  = 18
ground.velocity = -3.5, -6.5 + root,fVar(20)
guard.velocity = -4.5
air.velocity = -3.5, -6.5 + root,fVar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 40,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
id = 1202
sprpriority = 2

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = movecontact = 1
var(8) = IfElse(var(2)=2, 16, 11)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

;--- 相殺 ---
[State 1100, Helper]
type = helper
trigger1 = animelem = 4
trigger1 = !numhelper(1270)
helpertype = normal
name = "yotte"
stateno = 1270
ID = 1270
postype = p1
pos = 0,0

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = !animtime
value = 12,1

[State 0, hitvel]
type = changestate
trigger1 = !animtime
value = 10000

;------------------------------------------------------------------------
;相殺
[Statedef 1270]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 1270
sprpriority = 3

;--- アーマー処理 ---
[State 1103, HitBy]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1
ignorehitpause = 1 

[State 1103, HitOverRide]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 1270
time = -1
slot = 1
ignorehitpause = 1

;--- 座標 ---
[State 1103, BindToParent]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = -1

;--- 消滅 ---
[State 1103, End]
type = destroyself
trigger1 = parent,stateno != 1250
trigger2 = parent,animelemtime(5) >= 0

;---------------------------------------------------------------------------
;5B
[Statedef 2000]
type    = S
movetype= A
physics = N
poweradd= 0
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 0, btr]
type = AttackDist
trigger1 = 1
value = 0

[State 1000, end]
type = ChangeState
trigger1 = time > 0
trigger1 = helper(10000),stateno = 10000
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;5B(Stand)
[Statedef 2050]
type = U
movetype = A
physics = N
ctrl = 0
sprpriority = 1

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 2000)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1

;/template

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(20)= 0

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(4)= 0

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(8)= 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 2050

[State 0, btr]
type = bindtoroot
trigger1 = time <= 1
pos = 20,0

[State 0, btr]
type = AttackDist
trigger1 = 1
value = 0

[State 1100, Hado FX]
type = Explod
trigger1 = time = 0
ID = 1014
anim = 1014
pos = 3,15
postype = p1
ownpal = 1
removetime = -1
bindtime = -1
sprpriority = 5
ignorehitpause = 1
scale = .75,.75
removeongethit = 1

[State 0, snd]
type = playsnd
trigger1 = anim = 2050
trigger1 = animelemtime(1) = 0
value = 3,8
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 2000, 0
channel = 0

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animelemtime(2) = 0
anim = 21001
id = 21001
facing = 1
postype = p1
pos = 0,-60
sprpriority = 3
ownpal = 1
bindtime = -1
removeongethit = 1
scale = .5,1
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animelemtime(2) = 0
anim = 21000
id = 21000
facing = 1
postype = p1
pos = 0,-55
sprpriority = 3
ownpal = 1
bindtime = 1
removeongethit = 1
scale = .8,1
persistent = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(3) < 0
trigger1 = time%ifelse(root,var(7),4,8) = 0
anim = 227
id = 227
facing = 1
postype = p1
pos = 0,-40-(random%20)
sprpriority = 2
ownpal = 1
vel = 0,0
scale = .5,.5
ignorehitpause = 0

[State 4550, 0]
type = ModifyExplod
trigger1 = numexplod(21000) > 0
scale = .8,1/(time*0.1)
id = 21000

[State 0, snd]
type = playsnd
trigger1 = animelemtime(2) = 1
value = 2010,0

[State 0, snd]
type = playsnd
trigger1 = anim = 1054
trigger1 = animelemtime(1) = 0
value = 1000,1
channel = 0

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(13) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State 0, end]
type = changestate
trigger1 = time >= 28
trigger1 = root,command != "holdb" || (root,AILevel && p2movetype = H)
trigger2 = time > 112
trigger2 = var(20):= 1
value = 2055
ignorehitpause = 1

;---------------------------------------------------------------------------
;5B(Stand)2
[Statedef 2055]
type = U
movetype = A
physics = N
ctrl = 0
sprpriority = 1
anim = 2055

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 2000)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1

;/template

[State 3001, Width]
type = removeexplod
trigger1 = !time
id = 1014

[State 0, end]
type = varset
trigger1 = movehit = 1
trigger1 = numtarget(2050)
var(4) = 1
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = movehit = 1
trigger1 = numtarget(2050)
var(46) = 1
ignorehitpause = 1

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(13) = var(46)
ignorehitpause = 1

[State 0, end]
type = poweradd
trigger1 = var(46)
value = 100
ignorehitpause = 1

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0
ignorehitpause = 1

[State 0, btr]
type = AttackDist
trigger1 = 1
value = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 2050
trigger1 = animelemtime(1) = 0
value = 3,8
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animelemtime(2) = 0
anim = 21001
id = 21001
facing = 1
postype = p1
pos = 0,-60
sprpriority = 3
ownpal = 1
bindtime = -1
removeongethit = 1
scale = .5,1
persistent = 0
ignorehitpause = 0

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animelemtime(2) = 0
anim = 21000
id = 21000
facing = 1
postype = p1
pos = 0,-55
sprpriority = 3
ownpal = 1
bindtime = 1
removeongethit = 1
scale = .8,1
persistent = 0
ignorehitpause = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(3) < 0
trigger1 = time%ifelse(root,var(7),4,8) = 0
anim = 227
id = 227
facing = 1
postype = p1
pos = 0,-40-(random%20)
sprpriority = 2
ownpal = 1
vel = 0,0
scale = .5,.5
ignorehitpause = 0

[State 4550, 0]
type = ModifyExplod
trigger1 = numexplod(21000) > 0
scale = .8,1/(time*0.1)
id = 21000

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1015
ID = 1015
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 2
ignorehitpause = 0
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1016
ID = 1016
pos = 26,-75
postype = p1  ;p2,front,back,left,right
facing = facing
vfacing = 1
bindtime = 1
scale = .23,.5
sprpriority = 3
removeongethit = 1

[State 0, snd]
type = playsnd
trigger1 = animelemtime(2) = 1
value = 2010,0

[State 0, snd]
type = playsnd
trigger1 = anim = 1054
trigger1 = animelemtime(1) = 0
value = 1000,1
channel = 0

[State 0, hitvel]
type = playerpush
trigger1 = anim = 1054
value = 0

[State 0, snd]
type = playsnd
trigger1 = AnimElem = 2
value = 1001, 4

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Hard
damage    = ceil(Ifelse(var(20), 104 ,60)*root,fVar(10))
;guardflag = 
pausetime = 0,16
guard.pausetime = 8,8
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-70
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = high
ground.slidetime = 15
ground.hittime  = 15
guard.slidetime = 14
guard.hittime = 13
guard.ctrltime = 13
ground.velocity = -2
guard.velocity = -2
air.velocity = -1.5,-6.5 + root,fvar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 10,0
fall = 0
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
sprpriority = 1
ID = 2050

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = numtarget(2050)
trigger1 = movecontact = 1
var(8) = 16
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

;--- 相殺 ---
[State 1100, Helper]
type = helper
trigger1 = animelem = 2
trigger1 = !numhelper(2070)
helpertype = normal
name = "kukan"
stateno = 2070
ID = 2070
postype = p1
pos = 0,0

[state 0, helper]
type = helper
trigger1 = AnimElemTime(2) = 0
helpertype = normal
name = "pull atk"
stateno = 2080
id = 2080
pos = 0,0
postype = p1

[state 0, helper]
type = helper
trigger1 = AnimElemTime(2) = 0
trigger2 = AnimElemTime(2) = 1
trigger3 = AnimElemTime(2) = 2
helpertype = normal
name = "pull"
stateno = 12000
id = 12000
postype = p1
pos =  0,0
keyctrl = 0
size.ground.back = 20
size.ground.front = 20
size.height = 240

[State 0, snd]
type = playsnd
triggerall = NumHelper(2080)
trigger1 = helper(2080),numtarget
trigger1 = helper(2080),MoveHit = 1
value = 2000, 10
channel = 0
persistent = 0

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
value = 12,1

[State 0, hitvel]
type = changestate
trigger1 = !animtime
value = 10000

;------------------------------------------------------------------------
;相殺
[Statedef 2070]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 2070
sprpriority = 3

;--- アーマー処理 ---
[State 1103, HitBy]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1
ignorehitpause = 1 

[State 1103, HitOverRide]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 2070
time = -1
slot = 1
ignorehitpause = 1

;--- 座標 ---
[State 1103, BindToParent]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = -1

;--- 消滅 ---
[State 1103, End]
type = destroyself
trigger1 = parent,stateno != 2055
trigger2 = parent,animelemtime(3) >= 0

;---------------------------------------------------------------------------
;pull helper atk
[Statedef 2080]
type = S
movetype = A
physics = N
anim = 2080
velset = 0,0

[State 0, vel]
type = varset
trigger1 = Time = 0
var(20) = parent,var(20)

[State 0, var]
type = varset
trigger1 = 1
var(8) = parent,var(8)

[State 0, var]
type = changeanim
trigger1 = parent,var(8)
value = anim

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 200, hit2]
type = HitDef
trigger1 = 1
attr = S, ST
animtype  = hard
damage    = 0
;guardflag = 
hitonce = 0
hitflag = M
pausetime = 0, 0
sparkno = -1
guard.sparkno = -1
sparkxy = -1
hitsound   = -1
guardsound = -1
priority = 7, Hit
ground.type = High
ground.slidetime = IfElse(var(20), 30, 23)
ground.hittime  = IfElse(var(20), 30, 23)
guard.slidetime = IfElse(var(20), 30, 23)
ground.velocity = -2;12
air.velocity = -2, -1.5
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 0,0
fall = 0
air.fall = 0
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
sprpriority = 1
numhits = 0
ID = 2080

[State 0, end]
type = DestroySelf
trigger1 = !animtime

;---------------------------------------------------------------------------
;pull helper
[Statedef 12000]
type = S
movetype = I
physics = N
anim = 9999
velset = 0,0

[State 0, vel]
type = varset
trigger1 = Time = 0
var(20) = parent,var(20)

[State 0, var]
type = varset
trigger1 = 1
var(8) = parent,var(8)

[State 0, vel]
type = varadd
trigger1 = !var(8)
var(21) = 1

[State 0, var]
type = changeanim
trigger1 = parent,var(8)
value = anim

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, vel]
type = posset
trigger1 = Time = 0
y = 0

[State 0, vel]
type = changeanim
trigger1 = var(21) = 11
value = 715

[State 0, bind]
type = BindToParent
trigger1 = var(21) = 11
pos = parent,p2Dist x + 30

[State 0, push]
type = playerpush
trigger1 = var(21) >= 11
value = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = var(21) >= 11
x = IfElse(var(20), -26, -16)

[State 0, vel]
type = velset
trigger1 = ParentDist x > -85
x = 0

[State 0, end]
type = DestroySelf
trigger1 = var(21) >= 17

;---------------------------------------------------------------------------
;Air S
[Statedef 2200]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
anim = 2200
sprpriority = 1
;facep2 = 1

[State 200, vel]
type = velmul
trigger1 = Time = 0
x = .5
y = .75

[State 200, var]
type = Varset
trigger1 = Time = 0
var(30)= 1

[State 200, var]
type = Varset
trigger1 = Time = 0
fvar(8)= vel x
[State 200, var]
type = Varset
trigger1 = Time = 0
fvar(9)= vel y

[State 0, snd]
type = playsnd
trigger1 = Time = 1
value = 2200, random%2
channel = 0

[State 200, vel]
type = velset
trigger1 = vel y > 0
y = 0

[State 200, vel]
type = velmul
trigger1 = 1
x = .8
y = .8

[State 200, var]
type = ChangeState
trigger1 = time > 0
trigger1 = helper(10000),stateno = 10000
;trigger1 = helper(10000),stateno = 2250
;trigger1 = helper(10000),AnimElemTime(4) = 20
value = 2201

;---------------------------------------------------------------------------
;Air S(shunkanido)
[Statedef 2201]
type    = A
movetype= A
physics = N
poweradd= 0
ctrl = 0
;anim = 42
sprpriority = 1
;facep2 = 1

[State ,]
type = Trans
trigger1 = time < 6
trans = AddAlpha
alpha = 0, 255

;[State ,]
;type = PlayerPush
;trigger1 = time < 6
;value = 0

[State 200, vel]
type = Posadd
trigger1 = time = 0
;trigger1 = P2BodyDist x > 0
x = 72

[State 200, vel]
type = veladd
trigger1 = Time >= 1
y = .4

[State 200, vel]
type = VelSet
trigger1 = Time = 1
x = 1.5;fvar(8)
y = -3.5
;y = IfElse(fvar(9) > -3.5, -3.5, fvar(9))

[State 200, vo]
type = PlaySnd
trigger1 = time = 1
value = 2200, 10
channel = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 600, �X�e�[�g�ύX]
type = changestate
trigger1 = time = 1
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;JS(Stand)
[Statedef 2250]
type = U
movetype = A
physics = N
ctrl = 0
sprpriority = 1
anim = 2250

;template---

[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 2200)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1

;/template

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(4)= 0

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

[State 0, btr]
type = bindtoroot
trigger1 = time <= 9
pos = 15,0

[State 0, btr]
type = AttackDist
trigger1 = 1
value = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 2050
trigger1 = animelemtime(1) = 0
value = 3,8
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animelemtime(2) = 0
anim = 21001
id = 21001
facing = 1
postype = p1
pos = 0,-60
sprpriority = 3
ownpal = 1
bindtime = -1
removeongethit = 1
scale = .5,1
persistent = 0
ignorehitpause = 0

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animelemtime(2) = 0
anim = 21000
id = 21000
facing = 1
postype = p1
pos = 0,-55
sprpriority = 3
ownpal = 1
bindtime = 1
removeongethit = 1
scale = .8,1
persistent = 0
ignorehitpause = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(3) < 0
trigger1 = time%ifelse(root,var(7),4,8) = 0
anim = 227
id = 227
facing = 1
postype = p1
pos = 0,-40-(random%20)
sprpriority = 2
ownpal = 1
vel = 0,0
scale = .5,.5
ignorehitpause = 0

[State 4550, 0]
type = ModifyExplod
trigger1 = numexplod(21000) > 0
scale = .8,1/(time*0.1)
id = 21000

[State 0, snd]
type = playsnd
trigger1 = animelemtime(2) = 1
value = 2010,0

[State 0, snd]
type = playsnd
trigger1 = anim = 1054
trigger1 = animelemtime(1) = 0
value = 1000,1
channel = 0

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(13) = var(46)

[State 0, end]
type = varset
trigger1 = var(46)
var(46) = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, end]
type = changestate
trigger1 = root,stateno = 700
value = 10000

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animtime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animtime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999

[State 0, ]
type = ChangeAnim
trigger1 = Time = 10
value = 2255

[State 0, snd]
type = playsnd
trigger1 = anim = 2050
trigger1 = animelemtime(1) = 0
value = 3,8
persistent = 0

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animelemtime(2) = 0
anim = 21001
id = 21001
facing = 1
postype = p1
pos = 0,-60
sprpriority = 3
ownpal = 1
bindtime = -1
removeongethit = 1
scale = .5,1
persistent = 0
ignorehitpause = 0

[State 0, explod]
type = explod
trigger1 = anim = 2050
trigger1 = animelemtime(2) = 0
anim = 21000
id = 21000
facing = 1
postype = p1
pos = 0,-55
sprpriority = 3
ownpal = 1
bindtime = 1
removeongethit = 1
scale = .8,1
persistent = 0
ignorehitpause = 0

[State 0, explod]
type = explod
trigger1 = animelemtime(3) < 0
trigger1 = time%ifelse(root,var(7),4,8) = 0
anim = 227
id = 227
facing = 1
postype = p1
pos = 0,-40-(random%20)
sprpriority = 2
ownpal = 1
vel = 0,0
scale = .5,.5
ignorehitpause = 0

[State 4550, 0]
type = ModifyExplod
trigger1 = numexplod(21000) > 0
scale = .8,1/(time*0.1)
id = 21000

[State 0, snd]
type = playsnd
trigger1 = animelemtime(2) = 1
value = 2010,0

[State 0, Explod]
type = Explod
trigger1 = anim = 2255
trigger1 = AnimElem = 1
anim = 2258
pos = 45,-85
postype = p1  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = -2
scale = 1.6, .8
angle = -180
sprpriority = 2
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = anim = 2255
trigger1 = animelem = 1
anim = 1316
ID = 1316
pos = 52,-98
postype = p1
facing = facing
vfacing = 1
bindtime = 1
removetime = -2
scale = .35,.35
sprpriority = 6
removeongethit = 1

[State 0, snd]
type = playsnd
trigger1 = AnimElem = 1
value = 0, 4

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 1
attr = S, SA
animtype  = Hard
damage    = ceil(72*root,fVar(10)),ceil(72*.25*root,fVar(10))
guardflag = MA
pausetime = 0,11
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-70
hitsound   = s5,2
guardsound = s10,0
priority = 4, Hit
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
guard.slidetime = 18
ground.velocity = -3.5
guard.velocity = -3.5
air.velocity = -1.5,-6.5 + root,fvar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 10,0
fall = 0
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
sprpriority = 1
ID = 2250

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = numtarget(2250)
trigger1 = movecontact = 1
var(8) = 11
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

;--- 相殺 ---
[State 1100, Helper]
type = helper
trigger1 = animelem = 1
trigger1 = !numhelper(2270)
helpertype = normal
name = "yotte"
stateno = 2270
ID = 2270
postype = p1
pos = 0,0

[state 0, helper]
type = helper
trigger1 = AnimElemTime(5) = 1
trigger2 = AnimElemTime(5) = 3
trigger3 = AnimElemTime(5) = 5
helpertype = normal
name = "pull"
stateno = 12000
id = 12000
pos = p2Dist x + 30,0
postype = p1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.ground.back = 20
size.ground.front = 20
size.height = 240

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = !animtime
value = 12,1

[State 0, hitvel]
type = changestate
trigger1 = !animtime
value = 10000

;------------------------------------------------------------------------
;相殺
[Statedef 2270]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 2270
sprpriority = 3

;--- アーマー処理 ---
[State 1103, HitBy]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1
ignorehitpause = 1 

[State 1103, HitOverRide]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 2270
time = -1
slot = 1
ignorehitpause = 1

;--- 座標 ---
[State 1103, BindToParent]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = -1

;--- 消滅 ---
[State 1103, End]
type = destroyself
trigger1 = parent,stateno != 2250
trigger2 = parent,animelemtime(2) >= 0

;===========================================================================
; Hyper
;===========================================================================
;236H(HHA)
[Statedef 3000]
type    = S
movetype= A
physics = N
poweradd= 0
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 1

;bg
[State 0, snd]
type = bgpalfx
trigger1 = !time
add = 255,255,255
time = 2
ignorehitpause = 1
[State 3000,03]
type = BGPalfx
trigger1 = time = [2,62]
mul = 168-time,168-time,128-time
time = 1
ignorehitpause = 1

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 3000,0
channel = 0

[State 0, super]
type = superpause
trigger1 = time = 2
time = 60
movetime = 60
anim = -1
sound = s4,4
darken = 0
p2defmul = 1
poweradd = -1000
[State 0, explod]
type = explod
trigger1 = time = 2
anim = 7010
id = 7010
pos = -5,-120
postype = p1
sprpriority = 3
ownpal = 1
shadow = 0,0,0
bindtime = -1
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999

[State 3000,03]
type = BGPalfx
trigger1 = time = 1
mul = 128,128,128
time = 60
persistent = 0
ignorehitpause = 1

[State 810, ]
type = nothitby
trigger1 = time <= 62
value = SCA

[State 1000, end]
type = ChangeState
trigger1 = time > 0
trigger1 = helper(10000),stateno = 10000
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 236H
[Statedef 3050]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 0

[State 10000, ScreenBound]
type = ChangeAnim
trigger1 = Time = 0
value = 3050
ignorehitpause = 1

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 3000)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
ignorehitpause = 1
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5
ignorehitpause = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

;/template
[State 200, v]
type = VarSet
trigger1 = Time = 0
var(8)= 0

[State 0, btr]
type = bindtoroot
trigger1 = time = 0
pos = 15,0

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(4)= 0

[State 810, ]
type = nothitby
trigger1 = time <= 8
value = SCA

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 1001,2

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
name = "Effect"
ID = 3080
stateno = 3080
facing = 1
postype = p1
pos = 54,156
ownpal = 1
size.xscale = .75
size.yscale = .75
pausemovetime = 999999
supermovetime = 999999

[State 0, Helper]
type = Helper
trigger1 = animelem = 2
name = "Effect 2"
ID = 3081
stateno = 3081
facing = 1
postype = p1
pos = 54,156
ownpal = 1
size.xscale = .85
size.yscale = .85
pausemovetime = 999999
supermovetime = 999999

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 3051

;---------------------------------------------------------------------------
; 236H2
[Statedef 3051]
type    = S
movetype= A
physics = S
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3051
sprpriority = 0

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 3000,10
channel = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

;/template

[State 0, end]
type = varset
trigger1 = movehit = 1
var(49) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(49)
var(13) = 1

[State 0, end]
type = poweradd
trigger1 = var(49)
value = 0
ignorehitpause = 1
[State 0, end]
type = varset
trigger1 = var(49)
var(49) = 0
ignorehitpause = 1

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
attr = S, HA
animtype  = Hard
damage    = ceil(110*root,fVar(10))
hitflag = MAFD
;guardflag = 
pausetime = 0,3
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-70
hitsound   = s5,5
guardsound = s10,0
priority = 7, Hit
ground.type = high
ground.slidetime = 15
ground.hittime  = 15
guard.slidetime = 14
guard.hittime = 13
guard.ctrltime = 13
ground.velocity = -4.7, -6.5 + root,fvar(20)
guard.velocity = -2
air.velocity = -4.7,-6.5 + root,fvar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
fall.yvelocity = 0
yaccel = 0.45
getpower = 0,0
givepower = 50,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
sprpriority = 1
ID = 3050

[State 200, hit]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
animtype  = Hard
damage    = ceil(110*root,fVar(10))
hitflag = MAFD
;guardflag = 
pausetime = 0,16
sparkno = s6002
guard.sparkno = s6040
sparkxy = -10,-70
hitsound   = s5,5
guardsound = s10,0
priority = 7, Hit
ground.type = high
ground.slidetime = 15
ground.hittime  = 15
guard.slidetime = 14
guard.hittime = 13
guard.ctrltime = 13
ground.velocity = -4.7, -6.5 + root,fvar(20)
guard.velocity = -2
air.velocity = -4.7,-6.5 + root,fvar(20)
fall.xvelocity = ifelse((enemynear,facing=facing),1,-1)
yaccel = 0.45
getpower = 0,0
givepower = 50,0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 0
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -6
sprpriority = 1
ID = 3051

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = numtarget(3051)
trigger1 = movecontact = 1
var(8) = 16
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

;--- 相殺 ---
[State 1100, Helper]
type = helper
trigger1 = animelem = 3
trigger1 = !numhelper(3070)
helpertype = normal
name = "dabo"
stateno = 3070
ID = 3070
postype = p1
pos = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 1001,4

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 3015
ID = 3015
pos = 128,10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .75,1
sprpriority = 5
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1016
ID = 1016
pos = 16,-75
postype = p1  ;p2,front,back,left,right
facing = facing
vfacing = 1
bindtime = 1
removetime = -2
scale = .23,.23
sprpriority = 6
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 3016
ID = 3016
pos = 128,10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .75,.75
sprpriority = 0
removeongethit = 1

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
value = 12,1

[State 230, 2]
type = changestate
trigger1 = animtime = 0
value = 10000

;------------------------------------------------------------------------
;相殺
[Statedef 3070]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 3070
sprpriority = 3

;--- アーマー処理 ---
[State 1103, HitBy]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1
ignorehitpause = 1 

[State 1103, HitOverRide]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 3070
time = -1
slot = 1
ignorehitpause = 1

;--- 座標 ---
[State 1103, BindToParent]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = -1

;--- 消滅 ---
[State 1103, End]
type = destroyself
trigger1 = parent,stateno != 3051
trigger2 = parent,animelemtime(7) >= 0

;---------------------------------------------------------------------------
[Statedef 3080]
anim = 1014
sprpriority = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
trigger2 = time = 28
trigger3 = time = 56
value = 1001,3

[state 1123,??’?]
type=bindtoroot
trigger1=1
facing=1
pos = 18, 10

[State 0, DestroySelf]
type = DestroySelf
triggerall=ishelper
trigger1=parent,stateno!=3050

;---------------------------------------------------------------------------
[Statedef 3081]
anim = 1114
sprpriority = 5

[state 1123,??’?]
type=bindtoroot
trigger1=1
facing=1
pos = 18, 10

[State 0, DestroySelf]
type = DestroySelf
triggerall=ishelper
trigger1=parent,stateno!=3050

;---------------------------------------------------------------------------
[Statedef 3080]
type    = S
movetype = I
physics = N
juggle  = 0;4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 1114
sprpriority = 5

[state 1123,??’?]
type=bindtoroot
trigger1=1
facing=1

[State 0, DestroySelf]
type = DestroySelf
triggerall=ishelper
trigger1=root,stateno!=3000

;---------------------------------------------------------------------------
;GHA
[Statedef 3100]
type    = S
movetype= A
physics = N
poweradd= 0
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

[State 800, ad]
type = AttackDist
trigger1 = 1
value = 0

;bg
[State 0, snd]
type = bgpalfx
trigger1 = !time
add = 255,255,255
time = 2
ignorehitpause = 1

[State 0, super]
type = superpause
trigger1 = time = 2
time = 60
movetime = 60
anim = -1
sound = -1;s0,21
darken = 0
p2defmul = 1
poweradd = -3000
[State 0, snd]
type = playsnd
trigger1 = time = 2
value = 31000,0
[State 0, explod]
type = explod
trigger1 = time = 2
anim = 7000
id = 7000
pos = 0,-60
postype = p1
sprpriority = -8
ownpal = 1
shadow = 0,0,0
bindtime = -1
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, explod]
type = explod
trigger1 = time = 2
anim = 7001
id = 7001
pos = 0,0
postype = L
bindtime = -1
sprpriority = -10
removetime = -1
ownpal = 1
shadow = 0,0,0
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999

[State 3000, ]
type = BGPalfx
trigger1 = time >= 2
mul = 168-time*2, 168-time*2, 128-time*2
time = 1
ignorehitpause = 1

[State 810, nhb]
type = nothitby
trigger1 = time < 3
trigger2 = helper(10000),AnimElemTime(9) <= 0
trigger3 = helper(10000),movehit
value = SCA

[State 0, vo]
type = playsnd
trigger1 = time = 1
value = 3100, 0
channel = 0

[State 1000, success]
type = ChangeAnim
trigger1 = helper(10000),movehit
value = Anim
elem = 4

[State 1000, success]
type = Changestate
trigger1 = helper(10000),stateno = 3152
value = 3155

[State 1000, next]
type = Changestate
trigger1 = time > 0 && helper(10000),stateno = 10000
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;GHA Stand
[Statedef 3150]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
velset = 0,0
anim = 3151
sprpriority = 1

;template---
[State 0, snd]
type = playsnd
trigger1 = !time
trigger1 = prevstateno = 10000
value = 12,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 10000, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 10000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = S
statetype = S
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = C
statetype = C
ignorehitpause = 1

[State 0, state]
type = statetypeset
trigger1 = parent,statetype = A
statetype = A
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = ,AT

[State 10000, HitOverRide] 
type = HitOverRide
trigger1 = 1
slot = 0
stateno = 9500
attr = SCA,NA,SA,HA,NP,SP,HP
time = -1

[State 0, end]
type = changestate
trigger1 = root,movetype = H
value = 9505

[State 0, var]
type = parentvarset
trigger1 = !time
var(9) = 1

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
triggerall = !(root,stateno = 3100)
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time >= 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5

[State 0, turn]
type = turn
trigger1 = time <= 1
trigger1 = facing != root,facing

;/template

[State 800, ad]
type = AttackDist
trigger1 = 1
value = 0

[State 810, ]
type = nothitby
trigger1 = AnimElemTime(9) <= 0
value = SCA

[State 0, btr]
type = bindtoroot
trigger1 = time = 0
pos = 20,0

[State 0, end]
type = varset
trigger1 = movehit = 1
var(49) = 1

[State 0, end]
type = parentvaradd
trigger1 = var(49)
var(13) = 1

[State 0, end]
type = poweradd
trigger1 = var(49)
value = 0
ignorehitpause = 1
[State 0, end]
type = varset
trigger1 = var(49)
var(49) = 0
ignorehitpause = 1

[State 200, v]
type = VarSet
trigger1 = Time = 0
var(4)= 0

[State 230, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 1001,4

[State 220, 1]
type = Hitdef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
attr = S, HA
hitflag = MAF
;guardflag = M
animtype = hard
air.animtype = back
fall.animtype = back
priority = 7,Hit
damage = 50
pausetime = 0, 0
sparkno = S850
guard.sparkno = S840
sparkxy = -12,-83
hitsound = S5,5
guardsound = S1,5
ground.type = high
air.type = high
ground.slidetime = 84
ground.hittime = 84
ground.velocity = -5.5,0
guard.velocity = -8
air.velocity = -5.5,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 0,0
givepower = 50,0
persistent = 0
fall = 0
fall.recover = 1
yaccel = .45;44
guard.kill = 0
fall.recovertime = 58
p2facing = 1
kill = 0
ID = 3100
sprpriority = 1

[State 0, anim]
type = changeanim
trigger1 = var(8) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(8) > 0

[State 0, var]
type = varset
trigger1 = numtarget(3100)
trigger1 = movecontact = 1
var(8) = 60
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = var(8)
var(8) = -1
ignorehitpause = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = numTarget(3100)
trigger1 = movehit
value = SCA

[State 3001, 6]
type = targetState
trigger1 = numTarget(3100)
trigger1 = movehit = 1
value = 3176
id = 3100

[State 240, 4]
type = ChangeState
triggerall = var(8) = 0
trigger1 = NumTarget(3100)
trigger1 = Target(3100),Stateno = 3176
value = 3152

;--- 相殺 ---
[State 1100, Helper]
type = helper
trigger1 = animelem = 7
trigger1 = !numhelper(3170)
helpertype = normal
name = "gha"
stateno = 3170
ID = 3170
postype = p1
pos = 0,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 3519
ID = 3519
pos = 35,-85
postype = p1  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = -2
scale = 1.6, .8
angle = -180
sprpriority = 2
removeongethit = 1

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = animtime = -1
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999
[State 0, snd]
type = playsnd
trigger1 = animtime = -1
value = 12,1

[State 240, 4]
type = ChangeState
trigger1 = animTime = 0
value = 10000

;------------------------------------------------------------------------
;相殺
[Statedef 3170]
type = S
movetype = I
physics = S
velset = 0,0
ctrl = 0
anim = 3170
sprpriority = 3

;--- アーマー処理 ---
[State 1103, HitBy]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1
ignorehitpause = 1 

[State 1103, HitOverRide]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP,AT
stateno = 3170
time = -1
slot = 1
ignorehitpause = 1

;--- 座標 ---
[State 1103, BindToParent]
type = bindtoparent
trigger1 = 1
pos = 0,0
time = -1

;--- 消滅 ---
[State 1103, End]
type = destroyself
trigger1 = parent,stateno != 3150
trigger2 = parent,animelemtime(10) >= 0

;---------------------------------------------------------------------------
;GHA Stand Hit
[Statedef 3152]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 3152
sprpriority = 2

[State 3001, Width]
type = Width
trigger1 = 1
edge = 80,0

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 146
length = 25
palcolor = 256
palbright = 240,240,240
palcontrast = 120,120,220
palpostbright = 0,0,0
paladd = 10,10,25
palmul = .65,.65,.75
trans = "add"
ignorehitpause = 0
persistent = 0

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 850
ID = 850
pos = 32,-89
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 850
ID = 850
pos = 32,-89
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 8
anim = 850
ID = 850
pos = 32, -84
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 13
anim = 850
ID = 850
pos = 32,-73
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 18
anim = 850
ID = 850
pos = 32,-83
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 2, 0

[State 0, HitAdd]
type = HitAdd
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 13
trigger4 = animelem = 18
value = 1

;がオンがオン
[State 0, Explod]
type = Explod
trigger1 = animelem = 8
trigger2 = animelem = 18
anim = 3519
ID = 3519
pos = 35, -80 + random%10
postype = p1  ;p2,front,back,left,right
facing = -1
bindtime = 1
removetime = 12
scale = 1.6, .5 + (random%5) * 0.1
angle = -180
sprpriority = 2
removeongethit = 1
[State 0, Explod]
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 13
anim = 1015
ID = 1015
pos = 0, -40 + random%10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = 12
scale = 1, 0.4 + (random%3) * 0.1
sprpriority = 3
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 13
trigger4 = animelem = 18
anim = 1316
ID = 1316
pos = 32,-97
postype = p1  ;p2,front,back,left,right
facing = facing
random = 112,45
vfacing = 1
bindtime = 1
removetime = -2
scale = .35,.35
sprpriority = 6
removeongethit = 1

[state 300001, helper]
type = helper
trigger1 = time = 0
helpertype = normal
name = "Zoom"
postype = p1
pos = 0,0
stateno = 1856
id = 1856

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = !var(38)
trigger1 = animelem = 1
pos = 57,0
postype = P1
time = 1
ID = 3100

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 4
trigger2 = animelem = 8
value = ceil(-10 * root,fvar(10))
kill = 0
ID = 3100

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 13
value = ceil(-18 * root,fvar(10))
kill = 0
ID = 3100

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 18
value = ceil(-15 * root,fvar(10))
kill = 0
ID = 3100

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 24
value = ceil(-10 * root,fvar(10))
kill = 0
ID = 3100

[State 0, vo]
type = playsnd
trigger1 = time = 1
value = 3100, 10
channel = 0

[State 230, 2]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000]
type = ScreenBound
trigger1 = 1
value = 1

[State 440, 4]
type = ChangeState
trigger1 = time = 195
value = 3153

;---------------------------------------------------------------------------
;sinzitsuhasore1
[Statedef 3153]
type    = S
movetype= A
physics = S
poweradd= 0
ctrl = 0
velset = 4,0
anim = 3153
hitcountpersist = 1

[State 0, 1]
type = Offset
trigger1 = 1
y = 10

[State 10000]
type = ScreenBound
trigger1 = 1
value = 1

[State -3]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 10000]
type = PlayerPush
trigger1 = 1
value = 0

[State 1100, Hado FX]
type = Explod
trigger1 = Time = 5
ID = 1014
anim = 1014
pos = 3,15
postype = p1
ownpal = 1
removetime = 92
bindtime = -1
sprpriority = 5
ignorehitpause = 1
scale = .75,.75
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 1001,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 7
trigger3 = animelem = 14
value = 1001,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 17
value = 1001,4

[State 0, vo]
type = playsnd
trigger1 = animelem = 16
value = 3100, 20
channel = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 17
anim = 3160
ID = 1015
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = 1.4,0.8
sprpriority = 5
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 17
anim = 1016
ID = 1016
pos = 16,-75
postype = p1  ;p2,front,back,left,right
facing = facing
vfacing = 1
bindtime = 1
removetime = -2
scale = .23,.23
sprpriority = 6
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 17
value = 100,30
channel = 0

[State 0, HitAdd]
type = HitAdd
trigger1 = animelem = 17
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 17
value = 5,5

[State 0, Explod]
type = Explod
trigger1 = animelem = 17
anim = 850
ID = 850
pos = 77,-56
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 17
value = ceil(-110 * root,fvar(10))
kill = 0
ID = 3100

[STate 901,1]
type = targetBind
trigger1 = animelem = 17
pos = 95,0
postype = P1
time = 1
ID = 3100

[State 220, 3]
type = ChangeState
trigger1 = animtime = 0
value = 10000

;---------------------------------------------------------------------------
;target
[Statedef 3176]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 0

[State 1060, 2]
type = changeanim
trigger1 = time < 60
value = 5002

[State 181, nhb]
type = NotHitBy
trigger1 = 1
value = SCA

[State 181, nhb]
type = PlayerPush
trigger1 = 1
value = 0

[State 220, Position]
type = PosAdd
trigger1 = time < 60
x = 1*ifelse(time%2=0,-1,1)

[State 10000]
type = ScreenBound
trigger1 = 1
value = 0

[State 1060, 2]
type = changeanim2
trigger1 = time = 60
value = 3157

[State 190, 4]
type = changestate 
trigger1 = time = 260
value = 3177

;---------------------------------------------------------------------------
;target
[Statedef 3177]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 0

[State 10000]
type = NotHitBy
trigger1 = time < 277
value = SCA

[State 10000]
type = ScreenBound
trigger1 = time < 277
value = 0

[State 0, LifeAdd]
type = LifeSet
trigger1 = life <= 2
trigger1 = time < 260
value = 1

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 260
value = -1
kill = 1

[State 1060, 2]
type = changeanim2
trigger1 = time = 0
value = 5300

[State 1060, 2]
type = changeanim2
trigger1 = time = 113
value = 5030

[State 0, Veladd]
type = Veladd
trigger1 = time = 113
y = -.05

[State 1060, 2]
type = changeanim2
trigger1 = time = 277
value = 5050

[State 0, VelSet]
type = VelSet
trigger1 = time = 277
y = -7.3
x = -4.9 

[State 0, VelMul]
type = VelAdd
trigger1 = time >= 277
y = .45

[State 190, 4]
type = selfstate
trigger1 = Time > 277 && Pos Y >= 0 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
[Statedef 3155]
type    = S
movetype= A
physics = N
ctrl = 0
velset = 0,0
anim = 10201

[State 3001, Width]
type = Width
trigger1 = 1
edge = 100,0

[State 30500, flag]
Type = AssertSpecial
Trigger1 = 1
flag = TimerFreeze

[State 10000]
type = NotHitBy
trigger1 = 1
value = SCA

[State 10000]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, snd]
type = bgpalfx
trigger1 = 1
mul = 0,0,0
time = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = 100,29
channel = 0

[State 220, 3]
type = ChangeState
trigger1 = NumHelper(10000)
trigger1 = helper(10000),stateno = 3153
value = 3156

;---------------------------------------------------------------------------
[Statedef 3156]
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
anim = 3155
hitcountpersist = 1

[State 30500, flag]
Type = AssertSpecial
Trigger1 = 1
flag = TimerFreeze

[State 0, snd]
type = bgpalfx
trigger1 = time <= 274
mul = 0,0,0
time = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 100,31
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 220
value = 3156,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 3156,1

[state 300001, helper]
type = helper
trigger1 = time = 230
helpertype = normal
name = "Zoom"
postype = p1
pos = 0,0
stateno = 1857
id = 1857

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 274
value = -30
;kill = 0

[State 0, vo]
type = playsnd
trigger1 = animelem = 2
value = 3100, 30
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 274
x = -9.3
y = -6.9 

[State 0, VelMul]
type = VelAdd
trigger1 = time >= 274
y = .45

[State 183, shoe]
type = helper
trigger1 = time = 240
helpertype = normal
stateno = 6091
ID = 6091
name = "plant box"
postype = p1
pos = 135, -100

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 850
ID = 850
pos = -2,-88
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
scale = 1,1
sprpriority = 5
removeongethit = 0

[State 190, 4]
type = selfstate
trigger1 = Time > 279 && Pos Y >= 0 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;plant box
[Statedef 6091]
physics = N
velset = 0, 0
anim = 3158
sprpriority = 5

[State 6091, Vel]
type = velset
trigger1 = time = 1
x = -11.2

[State 6091, Vel]
type = velset
trigger1 = time = 12
x = -0.1

[State 6091, Vel]
type = changeanim
trigger1 = time >= 12
value = Anim

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 36

;---------------------------------------------------------------------------
;throw
[Statedef 3200]
type    = S
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 3200
sprpriority = 2

;bg
[State 0, snd]
type = bgpalfx
trigger1 = time = 1
add = 255,255,255
time = 2
ignorehitpause = 1
[State 3000,03]
type = BGPalfx
trigger1 = time = [0,60]
mul = 168-time,168-time,128-time
time = 1
ignorehitpause = 1


[State 0, super]
type = superpause
trigger1 = time = 1
time = 60
movetime = 60
anim = -1
sound = s4,4
darken = 0
p2defmul = 1
poweradd = -1000
[State 0, explod]
type = explod
trigger1 = time = 1
anim = 7010
id = 7010
pos = -6,-92
postype = p1
sprpriority = 3
ownpal = 1
shadow = 0,0,0
bindtime = -1
scale = .5,.5
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 1
anim = 3201
id = 3201
facing = 1
postype = p1
pos = 80,5
sprpriority = -1
ownpal = 1
scale = .35, .5

[State 3000,03]
type = BGPalfx
trigger1 = time = 1
mul = 128,128,128
time = 60
persistent = 0
ignorehitpause = 1

[State 810, nhb]
type = nothitby
trigger1 = time <= 66
value = SCA

[State 800, ad]
type = AttackDist
trigger1 = 1
value = 0

[State 810, pos]
type = posadd
trigger1 = Animelem = 2
x = 8

[State 200, vo]
type = PlaySnd
trigger1 = AnimElemTime(5) = 0
value = 3200,0+(random%2)
channel = 0

[State 800, hit]
type = HitDef
trigger1 = Animelem = 2
;trigger1 = P2Movetype != H
trigger1 = P2StateNo != [150,155]
attr = S, HT
hitflag = M;M-
priority = 7, Hit
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 3210
p2stateno = 3220
guard.dist = 0
numhits = 0
fall = 1

[State 800, end]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;throw success
[Statedef 3210]
type    = S
movetype= A
physics = N
anim = 3210
poweradd = 0
sprpriority = -1

[State 0, explod]
type = explod
trigger1 = AnimElemTime(4) = 0
anim = 6003
id = 6003
facing = 1
postype = p2
pos = -10,-83
sprpriority = 3
ownpal = 1
bindtime = 1
removeongethit = 1
scale = 1,1

[State 810, nhb]
type = nothitby
trigger1 = 1
value = SCA
[State 810, nhb]
type = PlayerPush
trigger1 = 1
value = 0

[State 810, se]
type = PlaySnd
trigger1 = !time
value = 1,0

[State 810, se]
type = PlaySnd
trigger1 = AnimElemTime(4) = 0
value = 6,4

[State 810, se]
type = PlaySnd
trigger1 = !time
value = 3210, 0;random%2
channel = 0

[State 810, bind]
type = TargetBind
trigger1 = AnimElemTime(4) < 0
pos = 40, 0

[State 810, damage]
type = TargetLifeAdd
trigger1 = AnimElemTime(4) = 0
value = ceil(-250 * fvar(10))

[State 810, spr]
type = SprPriority
trigger1 = AnimElemTime(3) = 0
value = 1

[State 810, target]
type = TargetState
trigger1 = AnimElemTime(4) = 0
value = 3221

[State 810, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;enemy
[Statedef 3220]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, anim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

[State 820, se]
type = SelfState
trigger1 = time = 260
value = 5050

;---------------------------------------------------------------------------
;enemy2
[Statedef 3221]
type    = U
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 0

[State 7000, VarSet]
type = playerpush
trigger1 = 1
value = 0

[State 0, pos]
type = posadd
trigger1 = time <= 13
x = 1*ifelse(time%2=0,-4,4)

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time <= 13
value = 5002
elem = animelemno(0)

[State 2601, ChangeAnim] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = time = 13
value = IfElse(SelfAnimExist(5052), 5052, 5050)

[State 5050, 2] ;Coming down anim
type = ChangeAnim
triggerall = time >= 6
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 7000, VarSet]
type = velset
trigger1 = time = 13
x = -10.1
y = -7.9

[State 7000, VarSet]
type = veladd
trigger1 = time >= 13
y = .4

[State 821, end]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;===========================================================================
;��ʈړ���~
[Statedef 6000]
ctrl = 0
anim = 9999

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = (root,stateno != [3000,3010])

;---------------------------------------------------------------------------
;gethit s
[Statedef 9500]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = -1

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(46) = var(46)

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(46) = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = 1
channel = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = parentvarset
trigger1 = time = 1
var(9) = 1

[State 0, end]
type = changestate
trigger1 = HitShakeOver
value = 10000

;---------------------------------------------------------------------------
[Statedef 9505]
type = U
movetype = H
physics = N
ctrl = 0
anim = 9500
velset = 0,0
sprpriority = -1

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(46) = var(46)

[State 0, end]
type = parentvaradd
trigger1 = var(46)
var(46) = 0

[State 3001, Width]
type = removeexplod
trigger1 = 1
id = 1055
[State 3001, Width]
type = removeexplod
trigger1 = 1
id = 1056

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, stopsnd]
type = stopsnd
trigger1 = !time
channel = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 7201
id = 7201
pos = 0,-60
postype = p1
sprpriority = 2
ownpal = 1
shadow = 0,0,0
scale = .555,.713
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8201
pos = 0,-50
postype = p1
sprpriority = 0
ownpal = 1
shadow = 0,0,0
scale = .75,.75
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = parentvarset
trigger1 = time = 1
var(9) = 1

[State 0, end]
type = changestate
trigger1 = time = 1
value = 10000

;===========================================================================
;stand
[Statedef 10000]
type = U
movetype = I
physics = N
anim = 9999
ctrl = 0
velset = 0,0
sprpriority = 2

[State 3001, Width]
type = removeexplod
trigger1 = numExplod(1014)
id = 1014
[State 3001, Width]
type = removeexplod
trigger1 = numExplod(1055)
id = 1055
[State 3001, Width]
type = removeexplod
trigger1 = numExplod(1056)
id = 1056

[State 5150, 8]
type = stopsnd
trigger1 = !time
channel = 7
[State -2,KO]
type = removeexplod
trigger1 = !time
id = 226

[State -2,KO]
type = bindtoroot
trigger1 = 1
pos = 0,0
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = Noshadow
ignorehitpause = 1

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = root,stateno = 1000
trigger2 = root,stateno = 1100
trigger3 = root,stateno = 1200
trigger4 = root,stateno = 1300
trigger5 = root,stateno = 2000
trigger6 = root,stateno = 2200
trigger7 = root,stateno = 3000
trigger8 = root,stateno = 3100
value = root,stateno + 50
[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,time = 1
trigger1 = (root,stateno = 220) || (root,stateno = [410, 420]) || (root,stateno = [610, 620])
value = root,stateno + 5

;===========================================================================
;HITG_SHAKE
[Statedef 15000]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = helper(10000),GetHitVar(animtype) != [3,5]
value = ifelse((helper(10000),GetHitVar(groundtype) = 1),5000,5010) + helper(10000),GetHitVar(animtype)

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = helper(10000),GetHitVar(animtype) = [3,5]
;value = 5030
value = 5030

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = (helper(10000),GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + helper(10000),GetHitVar(animtype)))
value = 5047 + helper(10000),GetHitVar(animtype)

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 0, life]
type = lifeadd
trigger1 = time = 0
trigger1 = prevstateno != [5000,5099]
value = -(helper(10000),GetHitVar(damage))

[State 220, Position]
type = PosAdd
trigger1 = !helper(10000),hitshakeover
x = 1*ifelse(time%2=0,-1,1)

[State 0, state]
type = statetypeset
trigger1 = !time
trigger1 = helper(10000),GetHitVar(yvel) != 0 && helper(10000),GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, hfs]
type = HitFallSet
trigger1 = !time
value = helper(10000),GetHitVar(fall)

[State 0, end]
type = changestate
trigger1 = helper(10000),HitShakeOver
trigger1 = helper(10000),GetHitVar(yvel) = 0 && !helper(10000),GetHitVar(fall)
value = 15001

[State 0, end]
type = changestate
trigger1 = helper(10000),HitShakeOver
value = 15030

[State 0, ffb L]
type = forcefeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
waveform = square
time = 6
persistent = 0

[State 0, ffb M]
type = forcefeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
waveform = square
time = 8
ampl = 110,-1,-.3
persistent = 0

[State 0, ffb H]
type = forcefeedback
trigger1 = anim = 5002
trigger2 = anim = 5012
trigger3 = anim = 5030
waveform = square
time = 15
ampl = 140
persistent = 0

;---------------------------------------------------------------------------
;HITG_SLIDE
[Statedef 15001]
type = S
movetype = H
physics = S

[State 0, end]
type = changestate
trigger1 = !alive
value = 15030

[State 0, hitvel]
type = velset
trigger1 = !time
x = helper(10000),GetHitVar(xvel)*ifelse(facing = -1,-1,1)

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5005 + helper(10000),GetHitVar(animtype) + ((helper(10000),GetHitVar(groundtype)=2)*10)

[State 0, vel]
type = velmul
trigger1 = time >= helper(10000),GetHitVar(slidetime)
x = .6

[State 0, vel]
type = velset
trigger1 = helper(10000),HitOver
x = 0

[State 0, defence]
type = defencemulset
trigger1 = helper(10000),HitOver
value = 1

[State 0, end]
type = changestate
trigger1 = helper(10000),HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;HITC_SHAKE
[Statedef 15010]
type = C
movetype = H
physics = N
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = helper(10000),GetHitVar(animtype) != [3,5]
value = 5020 + helper(10000),GetHitVar(animtype)

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = helper(10000),GetHitVar(animtype) = [3,5]
value = 5030

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = (helper(10000),GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + helper(10000),GetHitVar(animtype)))
value = 5047 + helper(10000),GetHitVar(animtype)

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 0, life]
type = lifeadd
trigger1 = time = 0
trigger1 = prevstateno != [5000,5099]
value = -(helper(10000),GetHitVar(damage))

[State 220, Position]
type = PosAdd
trigger1 = !helper(10000),hitshakeover
x = 1*ifelse(time%2=0,-1,1)

[State 0, state]
type = statetypeset
trigger1 = !time
trigger1 = helper(10000),GetHitVar(yvel) != 0 || helper(10000),GetHitVar(fall)
trigger2 = pos y != 0
statetype = A

[State 0, hfs]
type = HitFallSet
trigger1 = !time
value = helper(10000),GetHitVar(fall)

[State 0, end]
type = changestate
trigger1 = helper(10000),HitShakeOver
trigger1 = helper(10000),GetHitVar(yvel) = 0 && !helper(10000),GetHitVar(fall)
value = 15011

[State 0, end]
type = changestate
trigger1 = helper(10000),HitShakeOver
value = ifelse(alive = 0,5030,15030)

[State 0, ffb L]
type = forcefeedback
trigger1 = anim = 5020
waveform = square
time = 6
persistent = 0

[State 0, ffb M]
type = forcefeedback
trigger1 = anim = 5021
waveform = square
time = 8
ampl = 110,-1,-.3
persistent = 0

[State 0, ffb H]
type = forcefeedback
trigger1 = anim = 5022
waveform = square
time = 15
ampl = 140
persistent = 0

;---------------------------------------------------------------------------
;HITG_SLIDE
[Statedef 15011]
type = C
movetype = H
physics = C

[State 0, hitvel]
type = hitvelset
trigger1 = !time
x = 1

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5025 + helper(10000),GetHitVar(animtype)

[State 0, vel]
type = velmul
trigger1 = time >= helper(10000),GetHitVar(slidetime)
x = .6

[State 0, vel]
type = velset
trigger1 = helper(10000),HitOver
x = 0

[State 0, defence]
type = defencemulset
trigger1 = helper(10000),HitOver
value = 1

[State 0, end]
type = changestate
trigger1 = helper(10000),HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;HITA_SHAKE
[Statedef 15020]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = helper(10000),GetHitVar(animtype) != [3,5]
value = ifelse((helper(10000),GetHitVar(groundtype) = 1),5000,5010) + helper(10000),GetHitVar(animtype)

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = helper(10000),GetHitVar(animtype) = [3,5]
value = 5030

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = (helper(10000),GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + helper(10000),GetHitVar(animtype)))
value = 5047 + helper(10000),GetHitVar(animtype)

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 0, life]
type = lifeadd
trigger1 = time = 0
trigger1 = prevstateno != [5000,5099]
value = -(helper(10000),GetHitVar(damage))

[State 220, Position]
type = PosAdd
trigger1 = !helper(10000),hitshakeover
x = 1*ifelse(time%2=0,-1,1)

[State 0, hfs]
type = HitFallSet
trigger1 = !time
value = helper(10000),GetHitVar(fall)

[State 0, end]
type = changestate
trigger1 = helper(10000),HitShakeOver
value = ifelse(alive = 0,5030,15030)

[State 0, ffb L]
type = forcefeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
waveform = square
time = 6
persistent = 0

[State 0, ffb M]
type = forcefeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
waveform = square
time = 8
ampl = 110,-1,-.3
persistent = 0

[State 0, ffb H]
type = forcefeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
waveform = square
time = 15
ampl = 140
persistent = 0

;---------------------------------------------------------------------------
;HITA_UP (initial going up)
[Statedef 15030]
type = A
movetype = H
physics = N
ctrl = 0
anim = 5030

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, vel]
type = velset
trigger1 = !time
x = helper(10000),GetHitVar(xvel)*ifelse(facing = -1,-1,1)
y = helper(10000),GetHitVar(yvel)-(!alive)*3

[State 0, hfs]
type = HitFallSet
trigger1 = !time
value = helper(10000),GetHitVar(fall)

[State 0, end]
type = changestate
triggerall = !helper(10000),GetHitVar(fall)
trigger1 = helper(10000),HitOver
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 15040

[State 0, end]
type = changestate
triggerall = helper(10000),GetHitVar(fall)
trigger1 = helper(10000),HitOver
trigger2 = vel y > 0
trigger2 = pos y >= 10
value = 15050

[State 0, end]
type = changestate
trigger1 = !animtime
value = 15035

;---------------------------------------------------------------------------
;HITA_UP_T (transition)
[Statedef 15035]
type = A
movetype = H
physics = N

[State 0, anim]
type = changeanim
trigger1 = !time
trigger1 = SelfAnimExist(5035)
trigger1 = anim != [5051,5059]
trigger1 = anim != 5090
value = 5035

[State 0, vel]
type = veladd
trigger1 = 1
y = helper(10000),GetHitVar(yaccel)

[State 0, end]
type = changestate
triggerall = !HitFall
trigger1 = helper(10000),HitOver
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 15040

[State 0, end]
type = changestate
triggerall = HitFall
trigger1 = helper(10000),HitOver
trigger2 = !animtime
trigger3 = vel y > 0
trigger3 = pos y >= 10
trigger4 = !time
trigger4 = anim != 5035
value = 15050

;---------------------------------------------------------------------------
;HITA_RECOV (recovering in air, not falling)
[Statedef 15040]
type = A
movetype = H
physics = N

[State 0, end]
type = changestate
trigger1 = !alive
value = 15050

[State 0, anim]
type = changeanim
trigger1 = !animtime
trigger1 = anim != 5040
trigger2 = !time
trigger2 = anim != 5035
value = 5040

[State 0, state]
type = statetypeset
trigger1 = helper(10000),HitOver
movetype = I

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, end]
type = changestate
trigger1 = vel y > 0 && pos y >= 0
value = 52

;---------------------------------------------------------------------------
;HITA_FALL (knocked up, falling)
[Statedef 15050]
type = A
movetype = H
physics = N

[State 0, anim]
type = changeanim
trigger1 = !animtime
trigger1 = anim = 5035
trigger2 = !time
trigger2 = anim != 5035
trigger2 = (anim != [5051, 5059]) && (anim != [5061, 5069])
trigger2 = anim != 5090
value = 5050

[State 0, anim]
type = changeanim
trigger1 = anim = [5050,5059]
trigger1 = vel y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, end]
type = changestate
triggerall = helper(10000),CanRecover
triggerall = alive
triggerall = vel y > 0
triggerall = pos y >= -20
trigger1 = command = "recovery"
value = 5200

[State 0, end]
type = changestate
triggerall = helper(10000),CanRecover
triggerall = alive
triggerall = vel y > -1
trigger1 = command = "recovery"
value = 5210

[State 0, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100

;---------------------------------------------------------------------------
;HIT_TRIP (shaking)
[Statedef 15070]
type = A
movetype = H
physics = N
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5070

[State 0, life]
type = lifeadd
trigger1 = time = 0
trigger1 = prevstateno != [5000,5099]
value = -(helper(10000),GetHitVar(damage))

[State 0, hfs]
type = HitFallSet
trigger1 = !time
value = helper(10000),GetHitVar(fall)

[State 0, end]
type = changestate
trigger1 = helper(10000),HitShakeOver
value = 15071

[State 0, ffb H]
type = forcefeedback
trigger1 = !time
waveform = sinesquare
time = 12
ampl = 140

;---------------------------------------------------------------------------
;HIT_TRIP2 (fall through air)
[Statedef 15071]
type = A
movetype = H
physics = N

[State 0, vel]
type = velset
trigger1 = !time
x = helper(10000),GetHitVar(xvel)*ifelse(facing = -1,-1,1)
y = helper(10000),GetHitVar(yvel)

[State 0, vel]
type = veladd
trigger1 = 1
y = GetHitVar(yaccel)

[State 0, end]
type = changestate
triggerall = helper(10000),CanRecover
triggerall = alive
triggerall = vel y > 0
triggerall = pos y >= -20
trigger1 = command = "recovery"
value = 5200


[State 0, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= 15
value = 5110

;---------------------------------------------------------------------------
;�w�i���o
[Statedef 6666]
type     = S
movetype = I
physics  = S
anim     = 9999
velset   = 0,0
ctrl     = 0
sprpriority = 12

[State 3020]
type = posset
trigger1 = 1
x = (pos x-screenpos x)*facing
y = pos y-screenpos y

[State 3020]
type = BGPalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = (256-(time)*10),(256-(time)*10),(256-(time)*10)
sinadd = 256,256,256,10
invertall = 0
color = 256

[State 3020, �X�e�[�g�ύX]
type = ChangeState
trigger1 = time >= 18
value = 6667
ctrl = 0

;---------------------------------------------------------------------------
;�����w�i����2
[Statedef 6667]
type     = S
movetype = I
physics  = S
anim     = 9999
velset   = 0,0
ctrl     = 0

[State 3020]
type = posset
trigger1 = 1
x = (pos x-screenpos x)*facing
y = pos y-screenpos y

[State 3020]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 3020]
type = BGPalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 76,76,76
sinadd = 256,256,256,10
invertall = 0
color = 256

[State 950, �X�e�[�g�ύX]
type = ChangeState
trigger1 = time > 210
value = 6668
ctrl = 0

;---------------------------------------------------------------------------
;�w�i����2
[Statedef 6668]
type     = S
movetype = I
physics  = S
anim     = 9999
velset   = 0,0
ctrl     = 0

[State 3020]
type = posset
trigger1 = 1
x = (pos x-screenpos x)*facing
y = pos y-screenpos y

[State 3020]
type = AssertSpecial
trigger1 = 1
flag = nofg

[State 3020]
type = BGPalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = (76+(time*20)),(76+(time*20)),(76+(time*20))
sinadd = 256,256,256,10
invertall = 0
color = 256

[State 3020, �X�e�[�g�ύX]
type = DestroySelf
trigger1 = time >= 9

;-----------------------------------------------------------------------------
[Statedef 1855]
type = A
velset = 0, 0
anim = 9999
sprpriority = 5

[State 3000, ZOOM]
type = zoom
trigger1 = root, pos y = 0
trigger1 = time<=8
scale = 1 + (0.04*time)
pos = root, pos x+45*(root,facing), root, pos y;zoom
ignorehitpause = 1

[State 3000, ZOOM]
type = zoom
trigger1 = root, pos y = 0 
trigger1 = time>8
trigger1 = time<=68
scale = 1.25
pos = root, pos x+45*(root,facing), root, pos y;zoom
ignorehitpause = 1

[State 3000, ZOOM]
type = zoom
trigger1 = root, pos y = 0 
trigger1 = time>68
trigger1 = time<=74
scale = 1.25 - (0.04*(time-68))
pos = root, pos x+45*(root,facing), root, pos y;zoom
ignorehitpause = 1

[State 8500, End]
type = DestroySelf
trigger1 = Time >= 80

;-----------------------------------------------------------------------------
[Statedef 1856]
type = A
velset = 0, 0
anim = 9999
sprpriority = 5

[State 3000, ZOOM]
type = zoom
trigger1 = root, pos y = 0
trigger1 = time<=8
scale = 1 + (0.04*time)
pos = root, pos x+45*(root,facing), root, pos y;zoom
ignorehitpause = 1

[State 3000, ZOOM]
type = zoom
trigger1 = root, pos y = 0 
trigger1 = time>8
;trigger1 = time<=423
scale = 1.3
pos = root, pos x+45*(root,facing), root, pos y;zoom
ignorehitpause = 1

[State 8500, End]
type = DestroySelf
;trigger1 = Time >= 433
trigger1 = numhelper(1857)

;-----------------------------------------------------------------------------
[Statedef 1857]
type = A
velset = 0, 0
anim = 9999
sprpriority = 5

[State 3000, ZOOM]
type = zoom
;trigger1 = root, pos y = 0
trigger1 = time<=8
scale = 1.3 + (0.12*time)
pos = root, pos x+5*(root,facing), root, pos y-(time*7.5);zoom
ignorehitpause = 1

[State 3000, ZOOM]
type = zoom
;trigger1 = root, pos y = 0 
trigger1 = time>8
trigger1 = time<=50-6
scale = 2.25
pos = root, pos x+5*(root,facing), root, pos y-60;zoom
ignorehitpause = 1

[State 3000, ZOOM]
type = zoom
;trigger1 = root, pos y = 0 
trigger1 = time>50-6
trigger1 = time<=50
scale = 2.25 - (0.31*(time-(50-6)))
pos = root, pos x+5*(root,facing), root, pos y-60+((time-(50-6))*7.5);zoom
ignorehitpause = 1

[State 8500, End]
type = DestroySelf
trigger1 = Time >= 50


;-------------------------------------------------------------------------
;AIヘルパー
[Statedef 50000]
anim=9999;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

;----------------------------------------------------------
;使用var
;var(3)		経過時間
;var(4)		ガード学習
;var(5)		ガード学習
;var(7)		暗転計測
;var(8)		計ガード時間(いる？)
;var(9)		硬直差	
;var(59)	スイッチ
;----------------------------------------------------------

[State 10000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

;----------------------------------------------------------------------------------
;位置
;----------------------------------------------------------------------------------
[State -1]
type = PosSet
trigger1 = 1
x = ((root,pos x)-(90*facing))
y = (root,pos y)
[State -1]
type = Turn
trigger1 = enemynear,facing = facing
[State -1]
type = NotHitBy
trigger1 = 1
value = SCA
[State -1]
type = AssertSpecial
trigger1 = 1
flag = invisible

;----------------------------------------------------------------------------------
; ガード調整
;----------------------------------------------------------------------------------
;増減
[State -1]
type = Varadd
trigger1 = root,AILevel
trigger1 = var(11) = 0
trigger1 = var(12) != root,p2stateno
trigger1 = root,movetype = H && root,time = 1
trigegr1 = enemynear(root,var(32)),movecontact
trigger1 = root,time = 1
trigger1 = root,stateno = 150 || root,stateno = 152 || root,stateno = 5000 || root,stateno = 5010
trigger1 = var(11) := 1
var(13) = ifelse(enemynear,Statetype=A,1,ifelse(enemynear,Statetype=C,-1,0))
ignorehitpause = 1

;同一の技で何度も変動しないように
[State -1]
type = Varset
triggerall = root,AILevel
triggerall = enemynear(root,var(32)),movetype = A
triggerall = root,statetype != A
trigger1 = root,movetype = H
var(12) = root,p2stateno
ignorehitpause = 1

;相手着地時、ガードを屈寄りに
[State -1]
type = Varadd
trigger1 = root,AILevel
trigger1 = root,movetype = H && (root,stateno = [140,153])
trigger1 = enemynear,stateno = 52 && enemynear,time = 1
trigger1 = root,p2bodydist x < 90
trigger1 = root,gethitvar(hittime) > 8
var(13) = -1-((1*var(13)>0))
ignorehitpause = 1

;相手の状態
;空
[State -1]
type = Varset
trigger1 = root,AILevel
trigger1 = var(14) = 0
trigger1 = var(13) < 2
trigger1 = root,p2movetype != H
trigger1 = root,p2statetype = A
trigger1 = root,movetype != H
var(14) = 1
ignorehitpause = 1
;地
[State -1]
type = Varset
trigger1 = root,AILevel
trigger1 = var(14) = 0
trigger1 = var(13) > -2
trigger1 = root,p2movetype != H
trigger1 = root,p2statetype != A
trigger1 = root,movetype != H
var(14) = -1
ignorehitpause = 1
[State -1]
type = Varadd
trigger1 = root,AILevel
trigger1 = var(14) >= 1
var(14) = 1
ignorehitpause = 1
[State -1]
type = Varadd
trigger1 = root,AILevel
trigger1 = var(14) <= -1
var(14) = -1
ignorehitpause = 1

;相手が地上多め
[State -1]
type = varadd
trigger1 = root,AILevel
trigger1 = var(14) = -120
var(13) = -1-1*(var(13)>0)
ignorehitpause = 1

;相手が空中多め
[State -1]
type = varadd
trigger1 = root,AILevel
trigger1 = var(14) = 60
var(13) = 1+1*(var(13)<0)
ignorehitpause = 1

;reset
[State -1]
type = varset
triggerall = root,AILevel
trigger1 = var(14) >= 60 || var(14) <= -90
trigger2 = var(14) > 0 && p2statetype != A
trigger3 = var(14) < 0 && p2statetype = A
var(14) = 0
ignorehitpause = 1

;調整
[State -1]
type = Varset
trigger1 = root,AILevel
trigger1 = var(13) != [-5,5]
var(13) = ifelse(var(13)>5,5,-5)
ignorehitpause = 1
;調整2
[State -1]
type = Varset
trigger1 = root,AILevel
trigger1 = var(13) != [-2,2]
trigger1 = root,time = 2
trigger1 = root,movetype = H && (root,stateno != [120,159])
var(13) = ifelse(var(13)>2,2,-2)
ignorehitpause = 1

[State -1]
type = Varset
triggerall = root,AILevel
trigger1 = root,p2movetype != A 
trigger1 = !root,inguarddist
var(11) = 0
ignorehitpause = 1

[State -1]
type = Varset
triggerall = root,AILevel
triggerall = var(12)
trigger1 = root,p2movetype != A 
trigger1 = !root,inguarddist
var(12) = 0
ignorehitpause = 1
